<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuneScript Guide - Discussion and Evaluation</title>
    <link rel="stylesheet" href="../style.css">
    <script src="../main.js" defer></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4708B8S6ES"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-4708B8S6ES');
</script>
</head>

<body>
    <div class="sidebar">
        <h1>LuneScript Guide</h1>
        <ul class="nav-links">
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="index.html">Introduction</a>
                <ul class="submenu">
                    <li><a href="index.html#features">Key Features</a></li>
                    <li><a href="index.html#audience">Target Audience</a></li>
                    <li><a href="index.html#license">License</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="learning.html">Learning Guide</a>
                <ul class="submenu">
                    <li><a href="learning.html#step1">Step 1: Basics</a></li>
                    <li><a href="learning.html#step2">Step 2: Safety Features</a></li>
                    <li><a href="learning.html#step3">Step 3: Modern Features</a></li>
                    <li><a href="learning.html#navigation">Using Documentation</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="tutorial.html">Installation and Hello World</a>
                <ul class="submenu">
                    <li><a href="tutorial.html#install">Installation</a></li>
                    <li><a href="tutorial.html#hello">Hello World</a></li>
                    <li><a href="tutorial.html#options">lnsc Command</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="syntax.html">Basic Syntax</a>
                <ul class="submenu">
                    <li><a href="syntax.html#comments">Comments</a></li>
                    <li><a href="syntax.html#vars">Variable Declarations</a></li>
                    <li><a href="syntax.html#flow">Initialization by Flow Analysis</a></li>
                    <li><a href="syntax.html#scope">Scope Blocks</a></li>
                    <li><a href="syntax.html#attr">Attributes</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="value.html">Values and Types</a>
                <ul class="submenu">
                    <li><a href="value.html#primitive">Primitive Types</a></li>
                    <li><a href="value.html#collection">Collections</a></li>
                    <li><a href="value.html#list">&nbsp;&nbsp;List</a></li>
                    <li><a href="value.html#map">&nbsp;&nbsp;Map</a></li>
                    <li><a href="value.html#set">&nbsp;&nbsp;Set</a></li>
                    <li><a href="value.html#nilable">Nilable Types</a></li>
                    <li><a href="value.html#cast">Casting</a></li>
                    <li><a href="value.html#alge">Algebraic Data Types</a></li>
                    <li><a href="value.html#enum">Enum</a></li>
                    <li><a href="value.html#tuple">Tuple</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="control.html">Control Flow</a>
                <ul class="submenu">
                    <li><a href="control.html#if">if statement</a></li>
                    <li><a href="control.html#switch">switch statement</a></li>
                    <li><a href="control.html#while">while statement</a></li>
                    <li><a href="control.html#repeat">repeat statement</a></li>
                    <li><a href="control.html#for">for statement</a></li>
                    <li><a href="control.html#foreach">foreach statement</a></li>
                    <li><a href="control.html#apply">apply statement</a></li>
                    <li><a href="control.html#match">match statement</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="error.html">Error Handling</a>
                <ul class="submenu">
                    <li><a href="error.html#ret">__Ret Type</a></li>
                    <li><a href="error.html#delegation">Error Delegation</a></li>
                    <li><a href="error.html#best_practice">Types and Best Practices</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="function.html">Functions</a>
                <ul class="submenu">
                    <li><a href="function.html#def">Definition</a></li>
                    <li><a href="function.html#multi_ret">Multiple Returns</a></li>
                    <li><a href="function.html#closure">Closures</a></li>
                    <li><a href="function.html#form">Form (Function Type)</a></li>
                    <li><a href="function.html#varargs">Variable Arguments</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="class.html">Classes</a>
                <ul class="submenu">
                    <li><a href="class.html#def">Definition and Instantiation</a></li>
                    <li><a href="class.html#inherit">Inheritance and Overriding</a></li>
                    <li><a href="class.html#abstract">Abstract Classes</a></li>
                    <li><a href="class.html#interface">Interfaces</a></li>
                    <li><a href="class.html#advertise">Advertise</a></li>
                    <li><a href="class.html#mapping">Mapping</a></li>
                    <li><a href="class.html#proto">Prototype Declarations</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="generics.html">Generics</a>
                <ul class="submenu">
                    <li><a href="generics.html#func">Function Generics</a></li>
                    <li><a href="generics.html#class">Class Generics</a></li>
                    <li><a href="generics.html#constraint">Type Parameter Constraints</a></li>
                    <li><a href="generics.html#method">Method Generics</a></li>
                    <li><a href="generics.html#mut">Generics and Mutability</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="macro.html">Macros</a>
                <ul class="submenu">
                    <li><a href="macro.html#def">Definition</a></li>
                    <li><a href="macro.html#arg">Arguments</a></li>
                    <li><a href="macro.html#quote">Quoting</a></li>
                    <li><a href="macro.html#statement">Macro Statement</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="advanced.html">Advanced Features</a>
                <ul class="submenu">
                    <li><a href="advanced.html#match">Pattern Matching</a></li>
                    <li><a href="advanced.html#async">Asynchronous Processing</a></li>
                    <li><a href="advanced.html#glue">Glue Code</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="module.html">Modules and Projects</a>
                <ul class="submenu">
                    <li><a href="module.html#module">Module System</a></li>
                    <li><a href="module.html#project">Project Settings</a></li>
                    <li><a href="module.html#provide">Provide</a></li>
                    <li><a href="module.html#require">Require</a></li>
                    <li><a href="module.html#subfile">Subfile</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="standard.html">Standard Library</a>
                <ul class="submenu">
                    <li><a href="standard.html#builtin">Built-in Functions</a></li>
                    <li><a href="standard.html#lua">Lua Standard Library</a></li>
                    <li><a href="standard.html#io">IO</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="tutorial_macro.html">Practical: Macro Usage</a>
                <ul class="submenu">
                    <li><a href="tutorial_macro.html#step1">Step 1: Debug Print</a></li>
                    <li><a href="tutorial_macro.html#step2">Step 2: Assertion</a></li>
                    <li><a href="tutorial_macro.html#step3">Step 3: Measurement</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="tutorial_parser.html">Practical: Expression Parser</a>
                <ul class="submenu">
                    <li><a href="tutorial_parser.html#goal">Goal</a></li>
                    <li><a href="tutorial_parser.html#token">Step 1: Token Definition</a></li>
                    <li><a href="tutorial_parser.html#lexer">Step 2: Lexical Analysis</a></li>
                    <li><a href="tutorial_parser.html#ast">Step 3: Abstract Syntax Tree (AST)</a></li>
                    <li><a href="tutorial_parser.html#parser">Step 4: Parsing</a></li>
                    <li><a href="tutorial_parser.html#eval">Step 5: Evaluation and Execution</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="keyword.html">Keywords List</a>
                <ul class="submenu">
                    <li><a href="keyword.html#a">A-G</a></li>
                    <li><a href="keyword.html#h">H-N</a></li>
                    <li><a href="keyword.html#o">O-U</a></li>
                    <li><a href="keyword.html#v">V-Z</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="troubleshooting.html">Troubleshooting</a>
                <ul class="submenu">
                    <li><a href="troubleshooting.html#char">Character Literals</a></li>
                    <li><a href="troubleshooting.html#mut">Mutable Methods</a></li>
                    <li><a href="troubleshooting.html#match">Pattern Matching</a></li>
                    <li><a href="troubleshooting.html#unwrap">Nilable Operations</a></li>
                    <li><a href="troubleshooting.html#macro">Macro Syntax Errors</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="evaluation.html">Discussion and Evaluation</a>
                <ul class="submenu">
                    <li><a href="evaluation.html#quality">Language Quality</a></li>
                    <li><a href="evaluation.html#vs-lua">Comparison with Lua</a></li>
                    <li><a href="evaluation.html#vs-modern">Comparison with Modern Languages</a></li>
                    <li><a href="evaluation.html#vs-teal">Comparison with Teal</a></li>
                    <li><a href="evaluation.html#performance">Build Performance</a></li>
                    <li><a href="evaluation.html#issues">Issues and Proposals</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="main-content">
        <div class="header-nav">
            <a href="../ja/evaluation.html" class="lang-link">日本語</a>
        </div>
        <h1>Discussion and Evaluation of LuneScript</h1>

        <div class="meta-info">
            <p><strong>Author:</strong> Antigravity (AI Agent)</p>
            <p><strong>Date:</strong> December 18, 2025</p>
        </div>

        <p>This document summarizes an evaluation and discussion of LuneScript from a programmer's perspective, gained
            through the process of creating its reference documentation. It focuses on comparisons with Lua and
            contrasts with existing modern programming languages.</p>

        <h2 id="quality">Quality of LuneScript</h2>
        <h3>Conclusion: A highly sophisticated 'TypeScript / Rust for Lua'</h3>
        <p>LuneScript is not just a wrapper for Lua; I felt it is a highly complete language that precisely identifies
            the problems programmers face in large-scale development and solves them with minimal overhead.</p>

        <h2 id="vs-lua">Comparison with Lua</h2>
        <ul>
            <li><strong>Dramatic Improvement in Safety</strong>: Lua is dynamically typed and flexible, but bugs due to
                <code>nil</code> references or typos don't show up until runtime. LuneScript introduces strong
                <strong>static typing</strong> and <strong>Null Safety</strong>, eliminating these 100% at compile time.
            </li>
            <li><strong>Standardization of Class-based OOP</strong>: Implementing classes in Lua requires manipulating
                metatables, which often leads to inconsistent implementations. LuneScript provides classes, inheritance,
                interfaces, and abstract classes as part of the language specification, dramatically improving code
                readability and reusability.</li>
            <li><strong>Advanced Error Handling</strong>: LuneScript replaces Lua's redundant
                <code>if not res then return nil, err end</code> pattern with the <code>!</code> operator (error
                delegation), allowing for concise, Rust-like error handling. This is a revolutionary improvement for Lua
                development.</li>
        </ul>

        <h2 id="vs-modern">Comparison with Other Modern Languages</h2>
        <ul>
            <li><strong>Similarities with TypeScript</strong>: It occupies a position very similar to TypeScript
                relative to JavaScript, wisely providing type safety after the fact without breaking the existing Lua
                ecosystem (Zero Overhead).</li>
            <li><strong>Inspiration from Rust</strong>: Features like Algebraic Data Types (ADTs), the
                <code>match</code> statement for pattern matching, and error handling via the <code>!</code> operator
                reflect Rust's philosophy, making it extremely intuitive and easy for modern engineers to use.</li>
            <li><strong>Affinity with Go</strong>: In addition to transpilation to Lua, its support for transpiling to
                Go and its design philosophy of valuing simplicity have parallels with Go.</li>
        </ul>

        <h2 id="vs-teal">Comparison with Teal</h2>
        <p>Comparing it with <strong>Teal</strong>, a popular Lua transcompiler in recent years, reveals clear
            differences in their design philosophies.</p>
        <ul>
            <li><strong>Design Philosophy: Typed Lua vs. Modern Comprehensive Language</strong>: Teal pursues the path
                of "Typed Lua" (adding types to Lua). In contrast, while starting with static typing, LuneScript aims to
                bring "powerful weapons of modern languages" like ADTs, pattern matching, macros, and error delegation
                into the Lua world.</li>
            <li><strong>Learning Curve and Ease of Adoption</strong>: Teal has a very low learning cost because its
                syntax is almost identical to Lua. LuneScript has its own operators and "idioms," but once mastered, it
                allows for much more sophisticated expression.</li>
            <li><strong>Performance and Extensibility</strong>: While Teal is specialized for conversion to Lua,
                LuneScript also supports conversion to Go, providing an option to pursue performance beyond the
                framework of a scripting language.</li>
        </ul>

        <h2 id="unique">Unique Points</h2>
        <ul>
            <li><strong>Accessor Generation Rationality</strong>: The specification where accessors are generated just
                by writing <code>{pub, pub}</code> in a member variable definition thoroughly eliminates boilerplate.
                Furthermore, the design where <code>$val</code> is internally syntactic sugar for a
                <code>get_val()</code> call, and the intentional choice not to support "properties" to make
                side-effectful method calls explicit, is a rational design decision.</li>
            <li><strong>Powerful Macro System</strong>: Highly sophisticated and AST-aware, rather than simple string
                substitution, allowing for a high degree of freedom in metaprogramming.</li>
        </ul>

        <h2 id="performance">Evaluation of Transcompilation Performance</h2>
        <p>In large-scale development, the speed of the feedback loop from "writing" to "execution" is extremely
            critical.</p>
        <ul>
            <li><strong>LuneScript (Go version)</strong>: Operates as a native binary with optimized analysis and
                transformation. As a practical example, it boasts an incredible speed, <strong>transcompiling its own
                    self-hosted code (approx. 60,000 lines) in about 0.86 seconds</strong>.</li>
            <li><strong>Teal</strong>: Primarily runs on Lua/LuaJIT. It is very fast, taking about 0.3 seconds for its
                self-hosted build (several thousand to 10k+ lines), but it depends on the performance of the host Lua
                environment.</li>
            <li><strong>TypeScriptToLua (TSTL)</strong>: Runs on Node.js and uses the heavy TypeScript analysis engine,
                typically taking several seconds to tens of seconds for a codebase of similar scale.</li>
        </ul>
        <p>In conclusion, the Go version of the compiler is a powerful differentiator for LuneScript against other
            Lua-based statically typed languages.</p>

        <h2 id="issues">Expectations for Improvement and Challenges</h2>
        <ul>
            <li><strong>Learning Cost and Unique Notations</strong>: There are many unique symbols (<code>!</code>,
                <code>$</code>, <code>@@@</code>, <code>,,,</code>, etc.), requiring a learning period for engineers new
                to the language.</li>
            <li><strong>Mutual Referencing</strong>: Manual intervention like <code>proto</code> declarations in
                large-scale class structures might feel inconvenient to programmers accustomed to modern automatic
                dependency resolution.</li>
            <li><strong>Documentation and Error Messages</strong>: Advanced type analysis can sometimes make it
                difficult to identify the cause of an error. More helpful error messages and enhanced documentation for
                advanced features (like macros) are desired.</li>
            <li><strong>Experimental Features</strong>: Features like the <code>__Ret</code> type are still labeled
                "experimental"; a clear roadmap toward stable versions would make it easier to adopt.</li>
        </ul>

        <h2 id="proposal">Proposals for Further Development</h2>
        <ul>
            <li><strong>Grammar Modernization and Standardization</strong>: It would be desirable to have options to
                replace some symbol-based operators with more common reserved words (e.g., <code>as?</code>).</li>
            <li><strong>LSP Enhancement</strong>: Further polishing the code completion and refactoring experience in
                VSCode, etc., can achieve productivity that overwhelms other languages.</li>
            <li><strong>Package Manager Affinity</strong>: Seamless integration with Luarocks or a refined independent
                management system would accelerate library distribution.</li>
        </ul>

        <h2 id="summary">Summary: A Practical Modern Language Breaking the Limits of the Lua Ecosystem</h2>
        <div class="note">
            <p>LuneScript goes far beyond the framework of "Typed Lua," successfully bringing powerful features of
                modern languages like Rust and TypeScript into the Lua world.</p>
            <ul>
                <li><strong>Overwhelming Development Efficiency</strong>: The ultra-fast feedback loop of "processing
                    60,000 lines in 0.86 seconds" with the Go compiler allows you to enjoy the benefits of static typing
                    without any stress.</li>
                <li><strong>Uncompromising Safety</strong>: Essential guardrails for large-scale development, such as
                    Null Safety, strong type inference, and uninitialized variable detection, are implemented at a very
                    high level.</li>
                <li><strong>Practical Language Design</strong>: "Programmer-centric" features like error delegation (!),
                    accessor generation, and macros shine throughout, minimizing boilerplate in the field.</li>
            </ul>
            <p>While there are challenges such as the learning cost of unique notations, LuneScript remains one of the
                most powerful options for Lua developers who want to balance a fast development cycle with robust type
                safety.</p>
        </div>
    </div>
</body>

</html>