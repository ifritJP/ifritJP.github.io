<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuneScript Guide - Basic Syntax</title>
    <link rel="stylesheet" href="../style.css">
    <script src="../main.js" defer></script>
</head>

<body>
    <div class="sidebar">
        <h1>LuneScript Guide</h1>
        <ul class="nav-links">
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="index.html">Introduction</a>
                <ul class="submenu">
                    <li><a href="index.html#features">Key Features</a></li>
                    <li><a href="index.html#audience">Target Audience</a></li>
                    <li><a href="index.html#license">License</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="learning.html">Learning Guide</a>
                <ul class="submenu">
                    <li><a href="learning.html#step1">Step 1: Basics</a></li>
                    <li><a href="learning.html#step2">Step 2: Safety Features</a></li>
                    <li><a href="learning.html#step3">Step 3: Modern Features</a></li>
                    <li><a href="learning.html#navigation">Using Documentation</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="tutorial.html">Installation and Hello World</a>
                <ul class="submenu">
                    <li><a href="tutorial.html#install">Installation</a></li>
                    <li><a href="tutorial.html#hello">Hello World</a></li>
                    <li><a href="tutorial.html#options">lnsc Command</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="syntax.html">Basic Syntax</a>
                <ul class="submenu">
                    <li><a href="syntax.html#comments">Comments</a></li>
                    <li><a href="syntax.html#vars">Variable Declarations</a></li>
                    <li><a href="syntax.html#flow">Initialization by Flow Analysis</a></li>
                    <li><a href="syntax.html#scope">Scope Blocks</a></li>
                    <li><a href="syntax.html#attr">Attributes</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="value.html">Values and Types</a>
                <ul class="submenu">
                    <li><a href="value.html#primitive">Primitive Types</a></li>
                    <li><a href="value.html#collection">Collections</a></li>
                    <li><a href="value.html#list">&nbsp;&nbsp;List</a></li>
                    <li><a href="value.html#map">&nbsp;&nbsp;Map</a></li>
                    <li><a href="value.html#set">&nbsp;&nbsp;Set</a></li>
                    <li><a href="value.html#nilable">Nilable Types</a></li>
                    <li><a href="value.html#cast">Casting</a></li>
                    <li><a href="value.html#alge">Algebraic Data Types</a></li>
                    <li><a href="value.html#enum">Enum</a></li>
                    <li><a href="value.html#tuple">Tuple</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="control.html">Control Flow</a>
                <ul class="submenu">
                    <li><a href="control.html#if">if statement</a></li>
                    <li><a href="control.html#switch">switch statement</a></li>
                    <li><a href="control.html#while">while statement</a></li>
                    <li><a href="control.html#repeat">repeat statement</a></li>
                    <li><a href="control.html#for">for statement</a></li>
                    <li><a href="control.html#foreach">foreach statement</a></li>
                    <li><a href="control.html#apply">apply statement</a></li>
                    <li><a href="control.html#match">match statement</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="error.html">Error Handling</a>
                <ul class="submenu">
                    <li><a href="error.html#ret">__Ret Type</a></li>
                    <li><a href="error.html#delegation">Error Delegation</a></li>
                    <li><a href="error.html#best_practice">Types and Best Practices</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="function.html">Functions</a>
                <ul class="submenu">
                    <li><a href="function.html#def">Definition</a></li>
                    <li><a href="function.html#multi_ret">Multiple Returns</a></li>
                    <li><a href="function.html#closure">Closures</a></li>
                    <li><a href="function.html#form">Form (Function Type)</a></li>
                    <li><a href="function.html#varargs">Variable Arguments</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="class.html">Classes</a>
                <ul class="submenu">
                    <li><a href="class.html#def">Definition and Instantiation</a></li>
                    <li><a href="class.html#inherit">Inheritance and Overriding</a></li>
                    <li><a href="class.html#abstract">Abstract Classes</a></li>
                    <li><a href="class.html#interface">Interfaces</a></li>
                    <li><a href="class.html#advertise">Advertise</a></li>
                    <li><a href="class.html#mapping">Mapping</a></li>
                    <li><a href="class.html#proto">Prototype Declarations</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="generics.html">Generics</a>
                <ul class="submenu">
                    <li><a href="generics.html#func">Function Generics</a></li>
                    <li><a href="generics.html#class">Class Generics</a></li>
                    <li><a href="generics.html#constraint">Type Parameter Constraints</a></li>
                    <li><a href="generics.html#method">Method Generics</a></li>
                    <li><a href="generics.html#mut">Generics and Mutability</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="macro.html">Macros</a>
                <ul class="submenu">
                    <li><a href="macro.html#def">Definition</a></li>
                    <li><a href="macro.html#arg">Arguments</a></li>
                    <li><a href="macro.html#quote">Quoting</a></li>
                    <li><a href="macro.html#statement">Macro Statement</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="advanced.html">Advanced Features</a>
                <ul class="submenu">
                    <li><a href="advanced.html#match">Pattern Matching</a></li>
                    <li><a href="advanced.html#async">Asynchronous Processing</a></li>
                    <li><a href="advanced.html#glue">Glue Code</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="module.html">Modules and Projects</a>
                <ul class="submenu">
                    <li><a href="module.html#module">Module System</a></li>
                    <li><a href="module.html#project">Project Settings</a></li>
                    <li><a href="module.html#provide">Provide</a></li>
                    <li><a href="module.html#require">Require</a></li>
                    <li><a href="module.html#subfile">Subfile</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="standard.html">Standard Library</a>
                <ul class="submenu">
                    <li><a href="standard.html#builtin">Built-in Functions</a></li>
                    <li><a href="standard.html#lua">Lua Standard Library</a></li>
                    <li><a href="standard.html#io">IO</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="tutorial_macro.html">Practical: Macro Usage</a>
                <ul class="submenu">
                    <li><a href="tutorial_macro.html#step1">Step 1: Debug Print</a></li>
                    <li><a href="tutorial_macro.html#step2">Step 2: Assertion</a></li>
                    <li><a href="tutorial_macro.html#step3">Step 3: Measurement</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="tutorial_parser.html">Practical: Expression Parser</a>
                <ul class="submenu">
                    <li><a href="tutorial_parser.html#goal">Goal</a></li>
                    <li><a href="tutorial_parser.html#token">Step 1: Token Definition</a></li>
                    <li><a href="tutorial_parser.html#lexer">Step 2: Lexical Analysis</a></li>
                    <li><a href="tutorial_parser.html#ast">Step 3: Abstract Syntax Tree (AST)</a></li>
                    <li><a href="tutorial_parser.html#parser">Step 4: Parsing</a></li>
                    <li><a href="tutorial_parser.html#eval">Step 5: Evaluation and Execution</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="keyword.html">Keywords List</a>
                <ul class="submenu">
                    <li><a href="keyword.html#a">A-G</a></li>
                    <li><a href="keyword.html#h">H-N</a></li>
                    <li><a href="keyword.html#o">O-U</a></li>
                    <li><a href="keyword.html#v">V-Z</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="troubleshooting.html">Troubleshooting</a>
                <ul class="submenu">
                    <li><a href="troubleshooting.html#char">Character Literals</a></li>
                    <li><a href="troubleshooting.html#mut">Mutable Methods</a></li>
                    <li><a href="troubleshooting.html#match">Pattern Matching</a></li>
                    <li><a href="troubleshooting.html#unwrap">Nilable Operations</a></li>
                    <li><a href="troubleshooting.html#macro">Macro Syntax Errors</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <button class="toggle-btn">▶</button>
                <a href="evaluation.html">Discussion and Evaluation</a>
                <ul class="submenu">
                    <li><a href="evaluation.html#quality">Language Quality</a></li>
                    <li><a href="evaluation.html#vs-lua">Comparison with Lua</a></li>
                    <li><a href="evaluation.html#vs-teal">Comparison with Teal</a></li>
                    <li><a href="evaluation.html#issues">Issues and Proposals</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="main-content">
    <div class="header-nav">
        <a href="../ja/syntax.html" class="lang-link">日本語</a>
    </div>
        <h1>Basic Syntax</h1>
        <p>This section explains the basic syntax of LuneScript. Based on Lua's grammar, extensions have been made to
            enhance safety through static typing.</p>

        <h2 id="comments">Comments</h2>
        <p>C++ style comments can be used in LuneScript.</p>
        <ul>
            <li><code>//</code> : Comment until the end of the line (single-line comment)</li>
            <li><code>/* ... */</code> : Multi-line comment</li>
        </ul>
        <pre><code class="language-lns"><span class="comment">// This is a single-line comment</span>
<span class="keyword">let</span> val = <span class="number">1</span>; <span class="comment">// Can be written in the middle of a line</span>

<span class="comment">/*
  This is
  a multi-line
  comment
*/</span>
</code></pre>
        <div class="note">
            Note that the <code>//</code> (floor division) operator from Lua 5.3 is treated as a comment in LuneScript.
            To perform floor division, divide between <code>int</code> types, use explicit casting, or use appropriate
            functions.
        </div>

        <h2 id="vars">Variable Declarations</h2>
        <p id="keyword_let">Variables are declared using the <code>let</code> keyword. Since LuneScript is a statically
            typed language, variables have types.</p>

        <h3>Basic Declarations</h3>
        <pre><code class="language-lns"><span class="keyword">let</span> val: <span class="type">int</span> = <span class="number">1</span>;
</code></pre>
        <p>Specify <code>:Type</code> after the variable name. It is common to initialize a variable at the same time as
            declaration.</p>
        <p>If the type of the initial value differs from the declared type, it results in a compilation error.</p>
        <pre><code class="language-lns"><span class="comment">// Error: Cannot assign a real value to an int variable</span>
<span class="keyword">let</span> param: <span class="type">int</span> = <span class="number">1.5</span>; 
</code></pre>

        <h3>Type Inference</h3>
        <p>If an initial value is provided, the type declaration can be omitted. The compiler infers the type from the
            value on the right-hand side.</p>
        <pre><code class="language-lns"><span class="keyword">let</span> val1 = <span class="number">10</span>;      <span class="comment">// Inferred as int</span>
<span class="keyword">let</span> val2 = <span class="number">1.5</span>;     <span class="comment">// Inferred as real</span>
<span class="keyword">let</span> val3 = <span class="string">"test"</span>;  <span class="comment">// Inferred as str</span>
<span class="keyword">let</span> val4 = <span class="keyword">true</span>;    <span class="comment">// Inferred as bool</span>
</code></pre>
        <p>You mainly need to explicit the type in cases like:</p>
        <ul>
            <li>When giving <code>nil</code> as an initial value to a nilable type (T!) variable:
                <code>let val: int! = nil;</code></li>
            <li>When defining an empty list or map: <code>let list: List&lt;int&gt; = [];</code></li>
            <li>When you want to receive a variable with a superclass type:
                <code>let obj: SuperClass = new SubClass();</code></li>
        </ul>

        <h3 id="keyword_mut">Mutable and Immutable</h3>
        <p>Variables declared with <code>let</code> are <strong>Immutable</strong> by default. They cannot be
            reassigned.</p>
        <p>To declare a variable that can be reassigned, use the <code>mut</code> keyword.</p>
        <pre><code class="language-lns"><span class="keyword">let</span> <span class="keyword">mut</span> count = <span class="number">0</span>;
count = count + <span class="number">1</span>; <span class="comment">// OK</span>

<span class="keyword">let</span> fixed = <span class="number">10</span>;
<span class="comment">// fixed = 20; // Error: Immutable variable cannot be modified</span>
</code></pre>

        <h2 id="flow">Initialization by Flow Analysis (Uninitialized Variable Detection)</h2>
        <p>In LuneScript, you don't have to initialize a variable at the time of declaration, but it must be initialized
            before it is referenced.</p>
        <p>The compiler performs <strong>flow analysis</strong> to check if a variable is initialized in all execution
            paths (<strong>Uninitialized Variable Detection</strong>).</p>
        <pre><code class="language-lns"><span class="keyword">fn</span> check( flag: <span class="type">bool</span> ) {
    <span class="keyword">let</span> val: <span class="type">int</span>;

    <span class="keyword">if</span> flag {
        val = <span class="number">10</span>;
    } <span class="keyword">else</span> {
        val = <span class="number">20</span>;
    }
    
    <span class="comment">// OK because it is initialized in all paths</span>
    print( val ); 
}
</code></pre>
        <p>If a path exists where the variable is not initialized, a compilation error occurs.</p>
        <pre><code class="language-lns"><span class="keyword">fn</span> errorCase( flag: <span class="type">bool</span> ) {
    <span class="keyword">let</span> val: <span class="type">int</span>;
    <span class="keyword">if</span> flag {
        val = <span class="number">10</span>;
    }
    <span class="comment">// Since there is no else clause, it is not initialized if flag is false</span>
    <span class="comment">// print( val ); // Error: variable 'val' may be uninitialized</span>
}
</code></pre>
        <p>This initialization via flow analysis is "delayed initialization", and the <code>mut</code> declaration is
            not required (since it is assigned only once).</p>

        <h2 id="scope">Scope Blocks</h2>
        <p>The part enclosed in curly braces <code>{ ... }</code> becomes a scope block. Variables declared inside a
            block cannot be accessed from outside that block.</p>
        <pre><code class="language-lns"><span class="keyword">let</span> outer = <span class="number">1</span>;
{
    <span class="keyword">let</span> inner = <span class="number">2</span>;
    print( outer, inner ); <span class="comment">// 1 2</span>
}
<span class="comment">// print( inner ); // Error: 'inner' is undefined</span>
</code></pre>
        <div class="note">
            <strong>Prohibition of Shadowing:</strong><br>
            In LuneScript, you <strong>cannot define a variable with the same name as one already defined in an outer
                scope (shadowing).</strong><br>
            This constraint prevents accidental reference errors.
        </div>
        <pre><code class="language-lns"><span class="keyword">let</span> val = <span class="number">1</span>;
{
    <span class="comment">// Error: shadowing symbol of val</span>
    <span class="comment">// let val = 2; </span>
}
</code></pre>

    </div>
</body>

</html>