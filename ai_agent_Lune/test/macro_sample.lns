// _DBGP: 式とその値を表示する
macro _DBGP( val:__exp ) {
  print( "%s = %s" ( ,,,,val, ,,val ) );
}

// _Assert: 条件チェック
macro _Assert( cond:__exp, msg:str ) {
  if not (,,cond) {
    print( "Assertion failed: %s" (,,msg) );
  }
}

// _Measure: 実行時間計測
macro _Measure( label:str, block:__block ) {
  {}
  {
    let startTime = os.clock();
    ,,block
    let endTime = os.clock();
    print( "%s: %f sec" (,,label, endTime - startTime) );
  }
}

let hoge = 100;
_DBGP( hoge );

_Assert( hoge == 100, "hoge should be 100" );
_Assert( hoge == 200, "this should fail" );

_Measure( "test block", {
  let mut sum = 0;
  for i = 1, 100000 {
    sum = sum + i;
  }
  print( "sum = %d" (sum) );
} );
