<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="350px" preserveAspectRatio="none" style="width:540px;height:350px;background:#FFFFFF;" version="1.1" viewBox="0 0 540 350" width="540px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="17" x2="17" y1="36.2969" y2="315.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="194.5" x2="194.5" y1="36.2969" y2="315.3594"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="461.5" x2="461.5" y1="36.2969" y2="315.3594"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="25" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11" x="12" y="24.9951">js</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="25" x="5" y="314.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="11" x="12" y="334.3545">js</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="148.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="155.5" y="24.9951">go_runtime</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="148.5" y="314.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="155.5" y="334.3545">go_runtime</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="388.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="395.5" y="24.9951">go_main_goroutine</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="388.5" y="314.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="395.5" y="334.3545">go_main_goroutine</text><polygon fill="#181818" points="182.5,63.4297,192.5,67.4297,182.5,71.4297,186.5,67.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="17.5" x2="188.5" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="24.5" y="62.3638">go.run()</text><polygon fill="#008000" points="449.5,92.5625,459.5,96.5625,449.5,100.5625,453.5,96.5625" style="stroke:#008000;stroke-width:1.0;"/><line style="stroke:#008000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="194.5" x2="455.5" y1="96.5625" y2="96.5625"/><text fill="#008000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="205.5" y="91.4966">go main()</text><line style="stroke:#FF0000;stroke-width:1.0;" x1="461.5" x2="503.5" y1="125.6953" y2="125.6953"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="503.5" x2="503.5" y1="125.6953" y2="138.6953"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="462.5" x2="503.5" y1="138.6953" y2="138.6953"/><polygon fill="#FF0000" points="472.5,134.6953,462.5,138.6953,472.5,142.6953,468.5,138.6953" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="468.5" y="120.6294">wait chan</text><polygon fill="#181818" points="28.5,163.8281,18.5,167.8281,28.5,171.8281,24.5,167.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="22.5" x2="193.5" y1="167.8281" y2="167.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="34.5" y="162.7622">return go's Promise</text><polygon fill="#181818" points="182.5,192.9609,192.5,196.9609,182.5,200.9609,186.5,196.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="17.5" x2="188.5" y1="196.9609" y2="196.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="24.5" y="191.895">call a go's function</text><polygon fill="#181818" points="28.5,222.0938,18.5,226.0938,28.5,230.0938,24.5,226.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22.5" x2="193.5" y1="226.0938" y2="226.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="34.5" y="221.0278">call a js's async function</text><polygon fill="#181818" points="182.5,251.2266,192.5,255.2266,182.5,259.2266,186.5,255.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="17.5" x2="188.5" y1="255.2266" y2="255.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="24.5" y="250.1606">return Promise</text><line style="stroke:#FF0000;stroke-width:1.0;" x1="194.5" x2="236.5" y1="284.3594" y2="284.3594"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="236.5" x2="236.5" y1="284.3594" y2="297.3594"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="195.5" x2="236.5" y1="297.3594" y2="297.3594"/><polygon fill="#FF0000" points="205.5,293.3594,195.5,297.3594,205.5,301.3594,201.5,297.3594" style="stroke:#FF0000;stroke-width:1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253" x="201.5" y="279.2935">wait to call a 'then' callback --- deadlock</text><!--MD5=[e2224fdd8c3fc39d119ef636ffa5f1ec]
@startuml
js -> go_runtime: go.run()
go_runtime -[#green]-> go_main_goroutine: <font color=green> go main()
go_main_goroutine-[#red]> go_main_goroutine: <font color=red>wait chan
js <- - go_runtime  : return go's Promise
js -> go_runtime: call a go's function
js <- go_runtime  : call a js's async function
js - -> go_runtime: return Promise
go_runtime-[#red]> go_runtime: <font color=red>wait to call a 'then' callback - - - deadlock
@enduml

PlantUML version 1.2022.8(Sun Sep 25 18:00:33 JST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>