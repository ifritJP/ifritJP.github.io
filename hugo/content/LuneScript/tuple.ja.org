#+TITLE: 04.3 タプル編
# -*- coding:utf-8 -*-
#+AUTHOR: ifritJP
#+STARTUP: nofold
#+OPTIONS: ^:{}
#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="org-mode-document.css" />

ここでは、 値の組み合わせであるタプルの扱いついて説明します。

タプルは v1.5.3 から利用可能です。

* タプルのコンストラクタ

タプルは次のように書くことでオブジェクトを生成します。

#+BEGIN_SRC lns
// @lnsFront: ok
let obj = (= 1, "abc" ); // 1 "abc"
#+END_SRC

これは、1, "abc" の値の組み合わせを保持するタプルです。

タプルは ~(= )~ で値を括ります。

*必ず 1 つ以上のデータを指定する必要があります*

* タプルの型宣言

上記処理は型推論により型宣言を省略していますが、
省略しない場合は次のように書きます。

#+BEGIN_SRC lns
// @lnsFront: ok
let obj:(int,str) = (= 1, "abc" ); // 1 "abc"
#+END_SRC

~(int,str)~ は、要素が int と str であるタプルの型を宣言します。

** タプル型の各要素の名称

タプル型の宣言時に、次のように各要素の型にシンボルを付けることが可能です。

#+BEGIN_SRC lns
fn func(): (id:int, mess:str);
#+END_SRC

- シンボルが id で、型が int。
- シンボルが mess で、型が str。

ただ、上記はあくまでも人がその型が何なのか理解するのを補助するためのもので、
処理上は次のように省略したときと何も違いはありません。

#+BEGIN_SRC lns
fn func(): (int,str);
#+END_SRC

* タプルの値の展開

タプル型に格納されている値を展開するには次の代入文を使用します。

#+BEGIN_SRC lns
// @lnsFront: ok
let (val1,val2) = (= 1, "abc" ); // 1 "abc"
print( val1 + 10, val2 .. "xyz" ); // 11 abcxyz
#+END_SRC

let の変数名を =()= で括ることで、
初期値のタプルに格納されている値が各変数に代入されます。

この代入には次の制限があります。

- 代入先の変数の数とタプルの要素数が一致しなければならない
- 代入元のタプルは 1 つでなければならない

なお、次のような方法でタプルの各要素を参照することはできません。 

#+BEGIN_SRC lns
// @lnsFront: ng
let val = (= 1, "abc" ); // 1 "abc"
print( val[1] ); // error
#+END_SRC

以上。
