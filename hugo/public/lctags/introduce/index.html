<!DOCTYPE html>
<html lang="ja-jp">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>C/C&#43;&#43; ソースコードタグシステム lctags の紹介 - 公開技術情報</title>
<meta name="generator" content="Hugo 0.100.1" />
<link href="https://ifritjp.github.io/documentsindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://ifritjp.github.io/documents/lctags/introduce/">
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/custom.css">
<script src="https://ifritjp.github.io/documents/js/bundle.js"></script>
<script src="https://ifritjp.github.io/documents/js/lnsSrcRun.js"></script>
<script src="https://ifritjp.github.io/documents/js/highlight_lns.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/highlight_lns.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script><style>
:root {}
</style>
<meta property="og:title" content="C/C&#43;&#43; ソースコードタグシステム lctags の紹介" />
<meta property="og:description" content="まえがき 忙しい人はこのセクションを飛して、 「lctags の紹介」 に進んでください。 ソースコードタグシステムとは プログラミングしていると、 必ず" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ifritjp.github.io/documents/lctags/introduce/" /><meta property="article:section" content="lctags" />

<meta property="og:site_name" content="公開技術情報" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="C/C&#43;&#43; ソースコードタグシステム lctags の紹介"/>
<meta name="twitter:description" content="まえがき 忙しい人はこのセクションを飛して、 「lctags の紹介」 に進んでください。 ソースコードタグシステムとは プログラミングしていると、 必ず"/>
<meta itemprop="name" content="C/C&#43;&#43; ソースコードタグシステム lctags の紹介">
<meta itemprop="description" content="まえがき 忙しい人はこのセクションを飛して、 「lctags の紹介」 に進んでください。 ソースコードタグシステムとは プログラミングしていると、 必ず">

<meta itemprop="wordCount" content="5932">
<meta itemprop="keywords" content="" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4708B8S6ES"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4708B8S6ES');
</script>
</head>
<body><div class="container"><header>
<h1>公開技術情報</h1>


[<a href="https://ifritjp.github.io/documents/en/">English</a>]

[<a href="https://ifritjp.github.io/documents/">Japanese</a>]

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/documents/">Home</a></li>
<li><a href="https://ifritjp.github.io/blog2/public/">blog</a></li>
<li><a href="https://ifritjp.github.io/LuneScript-webFront/lnsc_web_frontend/for_fengari/">LuneScript on Web</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>C/C&#43;&#43; ソースコードタグシステム lctags の紹介</h1>

<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
まえがき
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
<strong>忙しい人はこのセクションを飛して、 <a href="#lctags">「lctags の紹介」</a> に進んでください。</strong></p>
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
ソースコードタグシステムとは
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>
プログラミングしていると、
必ずと言って良い程、関数の定義や、関数の参照箇所を調べる機会があります。</p>
<p>
小規模なコードであれば、grep-find すればこと足ります。</p>
<p>
しかし規模が大きくなると、grep-find だといつまで経っても結果が返ってこない、
あるいは、ノイズ(文字列や一部の名前が同じシンボル等)が多くてフィルタリングが大変になります。</p>
<p>
そこで、予めソースコードを解析し、
どの関数、シンボルがどこのソースコードで定義しているかを解析してタグ付けしておくことで、
所望の関数、シンボルの定義位置や参照位置を検索できるようにする
ソースコードタグシステムが利用されています。</p>
<p>
C 言語では主に、ctags, etags, gtags(GNU global) が使われています。</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
既存ツールの制限
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>
しかし、これらツールには制限があります。</p>
<p>
それは、構造体/クラスのメンバーのタグが、名前空間を認識せずにメンバー名だけでしか登録されていないというものです。</p>
<p>
例えば、次の構造体宣言があった場合、</p>
<div class="src src-c">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="n">TEST1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="n">TEST2</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>
TEST1 と TEST2 はそれぞれ data というメンバを持ち、
この data に対してタグが登録されます。
このとき、その data が TEST1::data なのか、 TEST2::data なのかを判別するには、
名前空間の TEST1, TEST2 を管理しなければならないですが、
先ほどあげたツールではその情報を管理しません。</p>
<p>
これにより、 TEST1::data の定義を確認したいときも、
直接 TEST1::data を確認することはできず、
候補として TEST1::data、TEST2::data がそれぞれ列挙され、それぞれを確認することになります。</p>
<p>
定義であればまだ箇所が少ないですが、参照となるとかなりノイズが混ることになりますし、
参照箇所を見ただけでは、どの型なのかを判別するのが難しい場合があります。</p>
<p>
また、 C++ の set/get のような汎用的なメソッド名では、
ノイズだらけになることが簡単に想像できます。</p>
<p>
このような制限になるのは、
これらツールがソースコードの構文解析を行なっていないためです。</p>
<p>
「構文解析を行なっていない」というと語弊があるので少し補足すると、
C言語の構文に則った字句解析までは行なっているが、
そのトークンが示す意味を完全には解析していない、ということです。</p>
<p>
これらのツールを利用していることがあるなら気が付いていると思いますが、
これらのツールを利用してソースコードを解析する際に、
ソースコードに対するコンパイラオプションを指定する必要がありません。</p>
<p>
コンパイラオプションを指定していないということは、
これらツールはインクルードファイルや define シンボルが分からないということです。</p>
<p>
<em>実際にはコンパイルオプションがなくてもコンパイルできる場合もありますが、ある程度以上の規模ではコンパイルオプションは必須です。</em></p>
<p>
コンパイルオプションがなくても解析できているということは、
つまりはそのレベルでの解析であるということです。</p>
<p>
これは、ツールを導入する上でのハードルが低いという意味では非常に良い特徴ではありますが、
それによっていくつかの制限が発生してしまいます。
その制限の代表的なものとして、ここで説明している「構造体メンバの区別が付かない」があります。</p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-3">
<h3 id="headline-4">
構文解析のハードル
</h3>
<div id="outline-text-headline-4" class="outline-text-3">
<p>
従来ツールの制限を解消するには、ツールがコンパイラオプションを認識し、
意味解析まで行なう必要があります。</p>
<p>
この工程は、
コンパイラを作ることとほとんど同義であると言って良いくらいの複雑な
処理が伴ないます。</p>
<p>
高水準言語の中では比較的にシンプルとされている C 言語でも、
規格に則ったコンパイラを作るのは至難の業です。</p>
<p>
CPU や SOC 等のチップベンダが C コンパイラを提供していますが、
これら C コンパイラは基本的に C89 準拠で
C99 以降をサポートするものがほとんどないことを考えても、
そのハードルの高さがうかがえます。</p>
<p>
<em>まぁ、チップベンダのコンパイラに関して言えば、ARM 以外の組込み向けチップに載せる様なプログラムは移植性が特に重視されるから、C89 以外を使うことは推奨されていない。よって、ベンダ側も C89 以外を対応していない、ってこともあるのかもしれない。</em></p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
libclang の利用
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>
そこで登場するのが libclang です。</p>
<p>
libclang は clang の機能をまとめたライブラリで、
これを利用することで C/C++ のコードを自前で解析せずに AST(Abstract Syntax Tree) にアクセスできます。</p>
<p>
AST にアクセスできるので、後はその情報を管理して検索できるシステムを作成すれば、
ソースコードタグシステムの完成です。</p>
<p>
このアイデア自体はかなり前からあって、実際にいくつかのツールが存在しますし、
私自身もツールを作成していました (今回紹介する lctags ではない)。</p>
</div>
</div>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
lctags 
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>
しかし、それらの libclang 対応ツールを業務のプロジェクトに適応するには
いくつかの課題があり、採用を見送っていました。</p>
<p>
そこで、それらの課題を解決する libclang 対応のソースコードタグシステムを新に作成しました。
そのツールが、ここで紹介する lctags です。</p>
</div>
</div>
</div>
</div>
<div id="outline-container-lctags" class="outline-2">
<h2 id="lctags">
lctags の紹介
</h2>
<div id="outline-text-lctags" class="outline-text-2">
<p>
lctags は、主に gtags の置き換えを目的に作成したソースコードタグシステムです。
よって、 gtags の主要な機能と互換を持たせています。
また、独自機能もいくつか搭載しています。</p>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
lctags の機能
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p>
具体的な機能を挙げると次のものがあります。</p>
<ul>
<li>関数、シンボル、メンバの定義・参照位置列挙</li>
<li>関数、シンボル、メンバの補完、展開</li>
<li>インクルードファイルの列挙</li>
<li>ワーニング、エラーの表示</li>
<li>コールグラフの作成</li>
<li>複数のコンパイルオプション対応</li>
<li>emacs 対応</li>
</ul>
</div>
</div>
<div id="outline-container-headline-9" class="outline-3">
<h3 id="headline-9">
lctags の使用方法
</h3>
<div id="outline-text-headline-9" class="outline-text-3">
<p>
ビルド方法や実行時のサンプル画面等は次のリンク先で確認してください。</p>
<p>
<a href="https://github.com/ifritJP/lctags">https://github.com/ifritJP/lctags</a></p>
<p>
次も参考にしてください。</p>
<ul>
<li>
<p>lctags で C 言語の関数コールを簡単に</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/5fe29d4c22c8d76aac0b">https://qiita.com/dwarfJP/items/5fe29d4c22c8d76aac0b</a></li>
</ul>
</li>
<li>
<p>lctags を使って C/C++ ソースコードをリファクタリング(サブルーチン化編)</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/263db943fe8ebc407abb">https://qiita.com/dwarfJP/items/263db943fe8ebc407abb</a></li>
</ul>
</li>
<li>
<p>C/C++ ソースコードをリファクタリング by lctags on emacs (リネーム編)</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/b702c60ff0381750e746">https://qiita.com/dwarfJP/items/b702c60ff0381750e746</a></li>
</ul>
</li>
<li>
<p>C/C++ の特定シンボルをハイライト by lctags on emacs  </p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/418541e8de1e040ed78b">https://qiita.com/dwarfJP/items/418541e8de1e040ed78b</a></li>
</ul>
</li>
<li>
<p>C/C++ の enum 補完 by lctags on emacs</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/29b4b1a4490c1ba42b9a">https://qiita.com/dwarfJP/items/29b4b1a4490c1ba42b9a</a>  </li>
</ul>
</li>
<li>
<p>C/C++ の変数サイズ確認 by lctags on emacs</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/2ce744f3e534a943c98d">https://qiita.com/dwarfJP/items/2ce744f3e534a943c98d</a></li>
</ul>
</li>
<li>
<p>lctags のプロジェクト簡易登録</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/965cfbf31a49998df95d">https://qiita.com/dwarfJP/items/965cfbf31a49998df95d</a>  </li>
</ul>
</li>
<li>
<p>C/C++ コードを解析してインタラクティブなコールグラフ表示 by lctags</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/ef868813a7aaa2572468">https://qiita.com/dwarfJP/items/ef868813a7aaa2572468</a>  </li>
</ul>
</li>
<li>
<p>C言語/C++ コードを解析してインタラクティブなモジュール構成図っぽいグラフ表示 by lctags</p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/fbc324704892667452c1">https://qiita.com/dwarfJP/items/fbc324704892667452c1</a></li>
</ul>
</li>
<li>
<p>Windows で lctags (C言語/C++ のタグジャンプ、コールグラフ、etc..)    </p>
<ul>
<li><a href="https://qiita.com/dwarfJP/items/9894ac9f65734317e1ad">https://qiita.com/dwarfJP/items/9894ac9f65734317e1ad</a></li>
</ul>
</li>
</ul>
<p>
lctags は libclanglua を利用して libclang を操作します。</p>
<p>
libclanglua については次を参照してください。</p>
<p>
https://qiita.com/dwarfJP/items/607d46e0a1dcb1e3a2a5</p>
</div>
</div>
<div id="outline-container-headline-10" class="outline-3">
<h3 id="headline-10">
チュートリアル
</h3>
<div id="outline-text-headline-10" class="outline-text-3">
<div id="outline-container-headline-11" class="outline-4">
<h4 id="headline-11">
DB の作成
</h4>
<div id="outline-text-headline-11" class="outline-text-4">
<p>
プロジェクトディレクトリのトップディレクトリで lctags init . を実行します。</p>
<p>
ここではプロジェクトディレクトリとして新しく test を作成し、そこに DB を作成します。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ mkdir test
</span></span><span class="line"><span class="cl">$ cd test
</span></span><span class="line"><span class="cl">$ lctags init .</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-12" class="outline-4">
<h4 id="headline-12">
ソースファイルの作成
</h4>
<div id="outline-text-headline-12" class="outline-text-4">
<p>
ソースファイルはなんでも構いませんが、
以降は次の内容のソースに沿って説明します。</p>
<div class="src src-c -n">
<pre tabindex="0"><code class="language-c -n" data-lang="c -n">typedef enum {
    enum_val1,
    enum_val2,
    enum_val3,
    enum_val4
} enum_val_t;
struct DATA {
    enum_val_t value;
    struct DATA * pData;
};
struct DATA2 {
    int value;
    enum_val_t value2;
    struct DATA * pData;
};
void sub( void )
{
    struct DATA data;
    struct DATA2 data2;
    struct DATA2 data22;
    data.value = enum_val2;
    data2.value = 0;
    data22.value2 = enum_val1;

}</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-13" class="outline-4">
<h4 id="headline-13">
ソースファイルの登録
</h4>
<div id="outline-text-headline-13" class="outline-text-4">
<p>
次のコマンドで sub.c を登録する。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ lctags build gcc sub.c</span></span></code></pre></div>
</div>
<p>
これで sub.c の情報が登録されます。</p>
<p>
-I 等のコンパイルオプションが必要な場合は、
通常のコンパイル通り gcc に続けて指定します。</p>
</div>
</div>
<div id="outline-container-headline-14" class="outline-4">
<h4 id="headline-14">
シンボル定義位置の列挙
</h4>
<div id="outline-text-headline-14" class="outline-text-4">
<p>
次のコマンドで DATA の定義場所をリストします。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ lctags -x DATA
</span></span><span class="line"><span class="cl">DATA                7 ./sub.c          struct DATA {</span></span></code></pre></div>
</div>
<p>
emacs の場合、M-t DATA で定義場所にジャンプします。</p>
</div>
</div>
<div id="outline-container-headline-15" class="outline-4">
<h4 id="headline-15">
シンボル参照位置の列挙  
</h4>
<div id="outline-text-headline-15" class="outline-text-4">
<p>
次のコマンドで value の参照場所をリストします。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ lctags -xr value
</span></span><span class="line"><span class="cl">value              21 ./sub.c              data.value = enum_val2;
</span></span><span class="line"><span class="cl">value              22 ./sub.c              data2.value = 0;</span></span></code></pre></div>
</div>
<p>
emacs の場合、M-r value で参照場所をリストします。</p>
<p>
この場合、 DATA::value, DATA2::value の両方をリストします。</p>
</div>
</div>
<div id="outline-container-headline-16" class="outline-4">
<h4 id="headline-16">
完全限定名シンボル定義位置の列挙
</h4>
<div id="outline-text-headline-16" class="outline-text-4">
<p>
次のコマンドで DATA::value の定義場所をリストします。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ lctags -x ::@struct::DATA::value
</span></span><span class="line"><span class="cl">::@struct::DATA::value    8 ./sub.c              enum_val_t value;</span></span></code></pre></div>
</div>
<p>
上記結果を見ると、DATA2::value が除外されていることが分かります。</p>
<p>
emacs の場合、21 行目の <code>data.value = enum_val2;</code> の value の箇所にカーソルを合せて、
C-u M-t で定義場所にジャンプします。</p>
</div>
</div>
<div id="outline-container-headline-17" class="outline-4">
<h4 id="headline-17">
完全限定名シンボル参照位置の列挙
</h4>
<div id="outline-text-headline-17" class="outline-text-4">
<p>
次のコマンドで DATA2::value の参照場所をリストします。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">$ lctags -xr ::@struct::DATA2::value
</span></span><span class="line"><span class="cl">::@struct::DATA2::value   22 ./sub.c              data2.value = 0;</span></span></code></pre></div>
</div>
<p>
上記結果を見ると、DATA::value が除外されていることが分かります。</p>
<p>
emacs の場合、12 行目の int value; の value の箇所にカーソルを合せて、
C-u M-r で参照場所にジャンプします。</p>
</div>
</div>
<div id="outline-container-headline-18" class="outline-4">
<h4 id="headline-18">
メンバ補完, 展開
</h4>
<div id="outline-text-headline-18" class="outline-text-4">
<p>
emacs で 24 行目に次を追記し、</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">data2.</span></span></code></pre></div>
</div>
<p>
. の後で C-c C-/ を入力すると、value, value2, pData をリストします。</p>
<p>
pData にカーソルを移動し C-M-f を入力すると pData が展開され、
さらに pData のメンバ補完状態になります。</p>
<p>
この状態で C-M-b を入力すると pData の展開が戻ります。</p>
<p>
メンバをリスト表示している状態で C-SPC を入力すると、メンバがマークされます。
メンバを複数マークして RET すると、マークしたメンバーが展開されます。</p>
</div>
</div>
<div id="outline-container-headline-19" class="outline-4">
<h4 id="headline-19">
enum 補完
</h4>
<div id="outline-text-headline-19" class="outline-text-4">
<p>
21 行目の <code>data.value = enum_val2;</code> の <code>enum_val2</code> の位置にカーソルを移動し、
C-c C-x を入力すると、 <code>enum_val_t</code> の enum 値補完になります。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">(E) enum_val1 =&gt; 0 &lt;::@enum::&lt;enum_enum_val_t&gt;&gt;
</span></span><span class="line"><span class="cl">(E) enum_val2 =&gt; 1 &lt;::@enum::&lt;enum_enum_val_t&gt;&gt;
</span></span><span class="line"><span class="cl">(E) enum_val3 =&gt; 2 &lt;::@enum::&lt;enum_enum_val_t&gt;&gt;
</span></span><span class="line"><span class="cl">(E) enum_val4 =&gt; 3 &lt;::@enum::&lt;enum_enum_val_t&gt;&gt;</span></span></code></pre></div>
</div>
<p>
このとき、リストには enum 値の数値も表示されます。</p>
<p>
ここで別の値を選択すると、 <code>enum_val2</code> が選択した enum 値に置き換わります。</p>
<p>
また、 <code>data.value = enum_val2;</code> の <code>enum_val2;</code> の部分を削除し、
= の直後にカーソルを合せて C-c C-/ を入力すると、
<code>enum_val_t</code> の値補完になります。</p>
</div>
</div>
<div id="outline-container-headline-20" class="outline-4">
<h4 id="headline-20">
構文エラーチェック
</h4>
<div id="outline-text-headline-20" class="outline-text-4">
<p>
22 行目の data2.value = 0; を data2.val = 0; に編集し C-c C-f を入力すると、
構文チェックされ次のエラー内容を示すバッファが開きます。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">sub.c:22: error: no member named &#39;val&#39; in &#39;struct DATA2&#39;</span></span></code></pre></div>
</div>
<p>
このバッファ内の行に移動して RET すると、そのエラー箇所に飛びます。</p>
<p>
変更を元に戻して C-c C-f を入力すると、ミニバッファに次のメッセージが表示されます。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">none diagnostics message</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-21" class="outline-4">
<h4 id="headline-21">
snippet
</h4>
<div id="outline-text-headline-21" class="outline-text-4">
<p>
解析した情報をもとに、 snippet を展開します。</p>
<div id="outline-container-headline-22" class="outline-5">
<h5 id="headline-22">
メンバダンプ
</h5>
<div id="outline-text-headline-22" class="outline-text-5">
<p>
sub() 内の空いている行に data2 を入力し、 C-c l を入力するとメニューが開きます。
この状態で G (大文字) を入力し、さらに m を入力します。
すると mini-buffer に log function?: printf( が表示されます。
ここでそのまま ENTER すると、 次の data2 のメンバを出力する printf が生成されます。</p>
<div class="src src-c">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span> <span class="s">&#34;data22.value = %p</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">data22</span><span class="p">.</span><span class="n">value</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span> <span class="s">&#34;data22.value2 = %p</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">data22</span><span class="p">.</span><span class="n">value2</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span> <span class="s">&#34;data22.pData = %p</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">data22</span><span class="p">.</span><span class="n">pData</span> <span class="p">);</span></span></span></code></pre></div>
</div>
<p>
なお、書式は全て %p として出力します。</p>
</div>
</div>
<div id="outline-container-headline-23" class="outline-5">
<h5 id="headline-23">
enum 文字列変換
</h5>
<div id="outline-text-headline-23" class="outline-text-5">
<p>
sub() 内の空いている行に <code>enum_val_t</code> を入力し、 C-c l を入力するとメニューが開きます。
この状態で G (大文字) を入力し、さらに e を入力します。
すると、次の <code>enum_val_t</code> の enum 値を文字列変換する switch 文が出力されます。</p>
<div class="src src-c">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl">    <span class="k">switch</span> <span class="p">(</span><span class="n">enum_val2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nl">enum_val1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;enum_val1&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nl">enum_val2</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;enum_val2&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nl">enum_val3</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;enum_val3&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nl">enum_val4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s">&#34;enum_val4&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span></span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-24" class="outline-3">
<h3 id="headline-24">
lctags の制限事項
</h3>
<div id="outline-text-headline-24" class="outline-text-3">
<ul>
<li>lctags は libclang を利用しているので C/C++ のソースコードを解析することができます。
しかし、私自身が C++ をあまり利用していないため C++ での動作検証がほとんど出来ていません。</li>
<li>DB サイズは gtags と比べると 2 倍以上の大きさになります。
これによりストレージの容量を消費するのはもちろん、シンボルの検索などで利用するメモリ量も増加します。</li>
<li>解析は高速性を重視して journal mode を memory に設定しています。
これにより、メモリを多めに消費します。
とはいえ、 高々 1 プロセス 100M 程度なので、いまどきの PC であれば然程影響はないと思います。</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-25" class="outline-2">
<h2 id="headline-25">
lctags の内部情報
</h2>
<div id="outline-text-headline-25" class="outline-text-2">
<p>
<strong>以降はユーザ向け情報でなはく、内部の技術情報なので興味のある方だけ参考程度にどうぞ</strong></p>
<div id="outline-container-headline-26" class="outline-3">
<h3 id="headline-26">
ツール構成
</h3>
<div id="outline-text-headline-26" class="outline-text-3">
<p>
lctags は次のソフトウェアを利用しています。</p>
<ul>
<li>lua, lua-dev</li>
<li>libclang-dev</li>
<li>luasqlite3</li>
<li>openssl</li>
</ul>
<p>lctags は Lua で作成しています。</p>
<p>
Lua を選択した理由は、次の通りです。</p>
<ul>
<li>コンパイル型ではなく、スクリプト型で気軽に開発したかった。</li>
<li>
<p>以前、他の言語で libclang を bind してツールを作成したことがあるが、
良い結果を得られなかった経験があり、
何か不具合があった時に深いレベルまで追える知識のある言語である必要があった。</p>
<ul>
<li>libclang の公式 binding が利用できる python でソースコードタグシステムを実装したことがあるが、
実行速度に難があった。</li>
<li>オープンソースの java 版 binding を利用したことがあるが、原因不明な不具合に悩まされた。</li>
<li>lua は binding の IF が非常にシンプルで、問題があっても追い易い。</li>
</ul>
</li>
<li>スクリプト言語でありながら、実行速度もそこそこ出る。</li>
<li>JIT 版もあるので、実行速度に問題があればそれを利用できる。</li>
<li>クロージャ等のいまどきのプログラムに必須の技術をサポートしている。</li>
<li>構成ファイルが最小限。</li>
<li>
<p>セットアップが簡単。 </p>
<ul>
<li>「パッケージ管理が優秀」という意味ではなく、数個のファイルコピーだけで動かせるという意味。</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-headline-27" class="outline-3">
<h3 id="headline-27">
DB Table の設計
</h3>
<div id="outline-text-headline-27" class="outline-text-3">
<p>
解析結果は SQLite で管理しています。</p>
<p>
DB Table は、次の構成になっています。</p>
<p>
なお、 DB Table は出来るだけ構成を維持するつもりですが、
機能追加等で変更することがあります。</p>
<div class="src src-txt">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">CREATE TABLE namespace ( id INTEGER PRIMARY KEY, snameId INTEGER, parentId INTEGER, digest CHAR(32), name VARCHAR UNIQUE COLLATE binary, otherName VARCHAR COLLATE binary, virtual INTEGER);
</span></span><span class="line"><span class="cl">CREATE TABLE simpleName ( id INTEGER PRIMARY KEY, name VARCHAR UNIQUE COLLATE binary);
</span></span><span class="line"><span class="cl">CREATE TABLE filePath ( id INTEGER PRIMARY KEY, path VARCHAR UNIQUE COLLATE binary, incFlag INTEGER, digest CHAR(32), currentDir VARCHAR COLLATE binary, invalidSkip INTEGER);
</span></span><span class="line"><span class="cl">CREATE TABLE targetInfo ( fileId INTEGER, target VARCHAR COLLATE binary, compOp VARCHAR COLLATE binary, hasPch INTEGER, updateTime INTEGER, PRIMARY KEY ( fileId, target, compOp ) );
</span></span><span class="line"><span class="cl">CREATE TABLE symbolDecl ( nsId INTEGER, snameId INTEGER, parentId INTEGER, type INTEGER, fileId INTEGER, line INTEGER, column INTEGER, endLine INTEGER, endColumn INTEGER, charSize INTEGER, comment VARCHAR COLLATE binary, hasBodyFlag INTEGER, PRIMARY KEY( nsId, fileId, line ) );
</span></span><span class="line"><span class="cl">CREATE TABLE symbolRef ( nsId INTEGER, snameId INTEGER, fileId INTEGER, line INTEGER, column INTEGER, endLine INTEGER, endColumn INTEGER, charSize INTEGER, belongNsId INTEGER, PRIMARY KEY( nsId, fileId, line, column ) );
</span></span><span class="line"><span class="cl">CREATE TABLE funcCall ( nsId INTEGER, snameId INTEGER, belongNsId INTEGER, fileId INTEGER, line INTEGER, column INTEGER, endLine INTEGER, endColumn INTEGER, charSize INTEGER, PRIMARY KEY( nsId, belongNsId ) );
</span></span><span class="line"><span class="cl">CREATE TABLE incRef ( id INTEGER, baseFileId INTEGER, line INTEGER );
</span></span><span class="line"><span class="cl">CREATE TABLE incCache ( id INTEGER, baseFileId INTEGER, incFlag INTEGER, PRIMARY KEY( id, baseFileId ) );
</span></span><span class="line"><span class="cl">CREATE TABLE tokenDigest ( fileId INTEGER, digest CHAR(32), PRIMARY KEY( fileId, digest ) );
</span></span><span class="line"><span class="cl">CREATE TABLE preproDigest ( fileId INTEGER, nsId INTEGER, digest CHAR(32), PRIMARY KEY( fileId, nsId, digest ) );
</span></span><span class="line"><span class="cl">CREATE TABLE etc ( keyName VARCHAR UNIQUE COLLATE binary PRIMARY KEY, val VARCHAR);</span></span></code></pre></div>
</div>
<ul>
<li>
<p>namespace </p>
<ul>
<li>名前空間を管理する。</li>
</ul>
</li>
<li>
<p>simpleName</p>
<ul>
<li>名前を管理する。</li>
<li>namespace は完全限定名で管理するのに対し、 simpleName は名前空間を除いた単純名を管理します。</li>
</ul>
</li>
<li>
<p>filePath</p>
<ul>
<li>ファイルのパスを管理する。</li>
</ul>
</li>
<li>
<p>targetInfo</p>
<ul>
<li>コンパイルオプションを管理する。</li>
</ul>
</li>
<li>
<p>symbolDecl</p>
<ul>
<li>シンボルの定義位置を管理する。</li>
</ul>
</li>
<li>
<p>symbolRef</p>
<ul>
<li>シンボルの参照位置を管理する。</li>
</ul>
</li>
<li>
<p>funcCall</p>
<ul>
<li>関数コール位置を管理する。</li>
</ul>
</li>
<li>
<p>incRef</p>
<ul>
<li>インクルードの参照関係を管理する。</li>
</ul>
</li>
<li>
<p>incCache</p>
<ul>
<li>インクルードの参照関係をメモ化管理する。</li>
</ul>
</li>
<li>
<p>tokenDigest</p>
<ul>
<li>ファイルの解析結果の digest を管理する。</li>
</ul>
</li>
<li>
<p>preproDigest</p>
<ul>
<li>ファイルのプリプロセス解析結果の digest を管理する。</li>
</ul>
</li>
<li>
<p>etc</p>
<ul>
<li>バージョン情報等のメタ情報を管理する。</li>
</ul>
</li>
</ul>
<p>Table は、パフォーマンスを優先して、あまり正規化していません。</p>
<p>
lctags で作成した DB は、lctags を通さずに直接 SQLite でアクセスすることも可能です。</p>
</div>
</div>
<div id="outline-container-headline-28" class="outline-3">
<h3 id="headline-28">
設計方針
</h3>
<div id="outline-text-headline-28" class="outline-text-3">
<p>
一般的な話だと思いますが、特に次のことを気をつけて設計しています。</p>
<p>
  <strong>『SQL に依存しないように DB アクセス処理をカプセル化する。』</strong></p>
<p>
手軽さから SQLite を採用していますが、
パフォーマンス次第では別の SQL DB や NoSQL に置き換える必要があると考えているので、
データアクセスは SQL に依存しない形にカプセル化しています。
また、使用する SQL のクエリも単純なものに限定しています。</p>
<p>
DB アクセスは 2 つのソースでカプセル化しています。</p>
<ul>
<li>DBAccess.lua</li>
<li>DBCtrl.lua  </li>
</ul>
<p>DBAccess.lua は SQLite をカプセル化し、DBCtrl.lua は SQL をカプセル化しています。</p>
<p>
ただし、いくつかこの方針から外れてしまっている箇所もあります。</p>
<p>
なお DBCtrl.lua については、
規模が大きくなってしまっているため将来的にモジュールを分割したいと思っています。</p>
</div>
</div>
<div id="outline-container-headline-29" class="outline-3">
<h3 id="headline-29">
ソース構成
</h3>
<div id="outline-text-headline-29" class="outline-text-3">
<p>
lctags のソース構成について説明します。</p>
<p>
ツールに何か不具合がある場合、
大抵は Analyzer.lua, DBCtrl.lua, Complete.lua にあります。</p>
<div id="outline-container-headline-30" class="outline-4">
<h4 id="headline-30">
Lua     
</h4>
<div id="outline-text-headline-30" class="outline-text-4">
<ul>
<li>
<p>lctags.lua</p>
<ul>
<li>メインソース</li>
<li>コマンドライン解析の結果を受け、各種処理に振り分ける</li>
</ul>
</li>
<li>
<p>Option.lua</p>
<ul>
<li>コマンドライン解析</li>
</ul>
</li>
<li>
<p>Analyzer.lua</p>
<ul>
<li>AST 解析</li>
</ul>
</li>
<li>
<p>DBCtrl.lua</p>
<ul>
<li>DB 制御</li>
</ul>
</li>
<li>
<p>DBAccess.lua</p>
<ul>
<li>SQLite 制御</li>
</ul>
</li>
<li>
<p>Complete.lua</p>
<ul>
<li>補完制御</li>
</ul>
</li>
<li>
<p>Make.lua</p>
<ul>
<li>ビルド制御</li>
</ul>
</li>
<li>
<p>Util.lua</p>
<ul>
<li>汎用処理</li>
</ul>
</li>
<li>
<p>Query.lua</p>
<ul>
<li>DB 問い合わせ</li>
</ul>
</li>
<li>
<p>OutputCtrl.lua</p>
<ul>
<li>DB 問い合わせ結果出力制御</li>
</ul>
</li>
<li>
<p>StatusServer.lua</p>
<ul>
<li>解析ステータスサーバ</li>
</ul>
</li>
<li>
<p>TermCtrl.lua</p>
<ul>
<li>ターミナル制御</li>
</ul>
</li>
<li>
<p>config.lua</p>
<ul>
<li>lctags.cnf のサンプル</li>
</ul>
</li>
<li>
<p>gcc.lua</p>
<ul>
<li>gcc 用の conf</li>
</ul>
</li>
<li>
<p>Json.lua</p>
<ul>
<li>JSON enc/dec</li>
</ul>
</li>
<li>
<p>LogCtrl.lua</p>
<ul>
<li>ログ出力</li>
</ul>
</li>
<li>
<p>StackCalc.lua</p>
<ul>
<li>スタック使用量解析(開発中)</li>
</ul>
</li>
<li>
<p>DynamicCall.lua</p>
<ul>
<li>動的呼び出し解析(開発中)</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-headline-31" class="outline-4">
<h4 id="headline-31">
emacs lisp
</h4>
<div id="outline-text-headline-31" class="outline-text-4">
<ul>
<li>
<p>lctags.el</p>
<ul>
<li>メインソース</li>
</ul>
</li>
<li>
<p>lctags-dispatch.el</p>
<ul>
<li>コマンドメニュー</li>
</ul>
</li>
<li>
<p>lctags-helm.el</p>
<ul>
<li>helm 用</li>
</ul>
</li>
<li>
<p>lctags-anything.el</p>
<ul>
<li>anything 用</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-32" class="outline-3">
<h3 id="headline-32">
テスト
</h3>
<div id="outline-text-headline-32" class="outline-text-3">
<p>
テストは次のコマンドで実行できます。</p>
<div class="src src-c">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="err">$</span> <span class="n">make</span> <span class="n">test</span></span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="edit-meta">

<br></div><nav class="pagination"><a class="nav nav-prev-2" href="https://ifritjp.github.io/documents/lctags/" title="C/C&#43;&#43; ソースコードタグシステム lctags の紹介"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - C/C&#43;&#43; ソースコードタグシステム lctags の紹介</a>
<a class="nav nav-next-2" href="https://ifritjp.github.io/documents/lctags/rename/" title="C/C&#43;&#43; ソースコードをリファクタリング by lctags on emacs (リネーム編)">Next - C/C&#43;&#43; ソースコードをリファクタリング by lctags on emacs (リネーム編) <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<nav class="slide-menu">
<ul>
<li class=""><a href="https://ifritjp.github.io/documents">Home</a></li>

<li class="parent has-sub-menu"><a href="https://ifritjp.github.io/documents/lctags/">C/C&#43;&#43; ソースコードタグシステム lctags の紹介<span class="mark opened">-</span></a>
  
<ul class="sub-menu">
<li class="active"><a href="https://ifritjp.github.io/documents/lctags/introduce/">C/C&#43;&#43; ソースコードタグシステム lctags の紹介</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/rename/">C/C&#43;&#43; ソースコードをリファクタリング by lctags on emacs (リネーム編)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/enum/">C/C&#43;&#43; の enum 補完 by lctags on emacs</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/highlight/">C/C&#43;&#43; の特定シンボルをハイライト by lctags on emacs</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/varsize/">C/C&#43;&#43; の変数サイズ確認 by lctags on emacs</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/callgraph/">C言語/C&#43;&#43; コードを解析してインタラクティブなコールグラフ表示 by lctags</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/modulegraph/">C言語/C&#43;&#43; コードを解析してインタラクティブなモジュール構成図っぽいグラフ表示 by lctags</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/callfunc/">lctags で C 言語の関数コールを簡単に</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/register/">lctags のプロジェクト簡易登録</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/c-language/">lctags を開発している時に改めて感じた C 言語規格のイケてないところ</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/subroutine/">lctags を使って C/C&#43;&#43; ソースコードをリファクタリング(サブルーチン化編)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lctags/windows/">Windows で lctags (C言語/C&#43;&#43; のタグジャンプ、コールグラフ、etc..)</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/lua/">C/C&#43;&#43; 言語プログラマのための Lua 入門リファレンス<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/lua/detail/">C インタフェース詳細編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lua/interface/">C インタフェース編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lua/fengari/">fengari の使い方 (Lua を Web ブラウザで動かす方法)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lua/lua5.4/">Lua 5.4 の主な変更点</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lua/anti-pattern/">Lua でやりがちなミス</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lua/pointer/">ポインタ編</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/emacs/">Emacs<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/emacs/simple-httpd/">emacs 簡易 HTTPD 化パケージ simple-httpd.el</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/emacs/company-mode/">自作言語 (LuneScript) の emacs company-mode backend 設定</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/go/">Goes<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/go/package/">Go のパッケージ</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/go/guide/">Go 入門</a></li>
</ul>
  
</li>

<li class=""><a href="https://ifritjp.github.io/documents/gcp/">Google Cloud Platform を使ってみる</a>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/javascript/">Javascripts<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/javascript/d3force/">D3.js V4 forceSimulation のノード動的更新(追加・削除)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/javascript/thread/">JavaScript のスレッド(非同期処理)</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/libclang/">Lua で C/C&#43;&#43; の構文解析 (libclang の Lua binding)<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/libclang/operator/">libclang で演算子を特定する方法</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/libclang/ast/">libclang の AST(Abstract Syntax Tree)</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/rust/">Rusts<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/rust/lifetime/">C/C&#43;&#43;エンジニアのための Rust のデータ所有権とライフタイム入門</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/singleboard/">Singleboards<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/singleboard/raspios64-point/">64bit 版 Raspberry Pi OS でカーネルモジュールを使った際に遭遇したエラーと対応方法</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/singleboard/build-kernel-module-64/">64bit 版 Raspberry Pi OS のカーネルモジュールのビルド環境設定</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/singleboard/bluetooth-a2dp-receiver/">Raspberry Pi で Bluetooth レシーバー (オーディオ:A2DP) を作成するための設定方法解説</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/singleboard/usb-gadget/">USB Gadget 機能を利用して Raspberry Pi を HID Keyboard と RNDIS の複合デバイスにする</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/singleboard/recover-image/">誤ってパーティションテーブル (LBA 0) を消して(0クリアして)しまった場合の対処</a></li>
</ul>
  
</li>

<li class=" has-sub-menu"><a href="https://ifritjp.github.io/documents/lunescript/">トランスコンパイラ LuneScript で Lua の開発をもっと楽に!!<span class="mark closed">+</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/tutorial1/">00. はじめに</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/tutorial2.setup/">01. 導入編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/tutorial3.hello/">02. Hello world</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/crosscompile/">03. Lua バージョン間のクロスコンパイル</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/value/">04. 値編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/set/">04.2. Set 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/enum/">05. enum 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/match/">06. match 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/variable/">07. 変数 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/branch/">08. 一般分岐構文 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/loop/">09. 繰り返し構文 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/func/">10. 関数 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/multipleretval/">10.2. 多値の戻り値</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/defaultarg/">10.3. 引数の省略 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/arg/">10.4. 可変長引数、戻り値 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/closure/">10.5. クロージャ</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/nilable/">11. nilable 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/class1/">12. クラス 基本 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/class2accessor/">13. accessor 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/classinherit/">14. クラス 継承 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/classadvertise/">15. クラス advertise 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/classoverride/">16. クラス override 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/interface/">17. インタフェース 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/classmapping/">18. mapping 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/generics/">19. generics 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/nilcond/">20. nil 条件演算子 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/import/">21. import/provide 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/require/">22. require/module 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/glue/">22.1. glue コードの半自動生成</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/lua/">22.2. Lua と連携 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/make/">23. ビルド 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/macro/">24. マクロ 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/cast/">25. キャスト 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/subfile/">26. subfile 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/lazyloading/">27. 遅延ロード 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/shebang_main/">28. shebang とコマンドライン引数</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/dir/">29. LuneScript を利用するプロジェクトの推奨ディレクトリ構成</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/go/">80. Go 言語へのトランスコンパイル</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/go_package/">80.2 Go 言語へのトランスコンパイル時のパッケージ</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/lua_runtime/">80.3 Go へトランスコンパイルした際の Lua ランタイム</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/go_wasm/">80.4 LuneScript の WebAssembly 対応</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/async/">81. 安全な非同期処理</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/async_old/">81.1 非同期処理(過去情報)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/luago/">82. Lua と連携 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/lnstags/">A. lnstags によるタグジャンプ (ソースコードタグシステム)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/reason/">A. Lua のトランスコンパイラ LuneScript を開発した理由</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/regret/">A. LuneScript の言語仕様でミスだったと思っているところ</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/onweb/">A. Web ブラウザ上で動作する LuneScript</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/recommend/">A. トランスコンパイラ開発のすゝめ</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/completion/">A.イマドキな開発環境でもっと楽しよう</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/box/">Box 編</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/test/">X. 言語開発の品質コントロールにおけるセルフホスティングの重要性とテスト設計</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/design/">Y.1 LuneScript の開発方法</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/design-2/">Y.2 LuneScript の開発(型情報管理)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/design-3/">Y.3 LuneScript の開発(スコープとシンボル)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/go_study/">Z. Go 言語へのトランスコンパイル (検討段階)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/lunescript/all/">全文検索用結合ファイル</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
