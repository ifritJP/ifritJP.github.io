<!DOCTYPE html>
<html lang="ja-jp">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>05. enum edition - tech</title>
<meta name="generator" content="Hugo 0.68.3" />
<link href="https://ifritjp.github.io/documentsindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://ifritjp.github.io/documents/en/lunescript/enum/">
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/custom.css">
<script src="https://ifritjp.github.io/documents/js/bundle.js"></script>
<script src="https://ifritjp.github.io/documents/js/lnsSrcRun.js"></script>
<script src="https://ifritjp.github.io/documents/js/highlight_lns.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/highlight_lns.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120218599-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-120218599-2');
</script>
<style>
:root {}
</style>
<meta property="og:title" content="05. enum edition" />
<meta property="og:description" content="This time, I will explain the enum value of LuneScript. enum   LuneScript enums allow you to name and manage sets of values.  The types of values that can be handled as enums are as follows.    int    real    str    The range of an enum can be defined from multiple values, but the value types must be the same." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ifritjp.github.io/documents/en/lunescript/enum/" />
<meta property="og:site_name" content="tech" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="05. enum edition"/>
<meta name="twitter:description" content="This time, I will explain the enum value of LuneScript. enum   LuneScript enums allow you to name and manage sets of values.  The types of values that can be handled as enums are as follows.    int    real    str    The range of an enum can be defined from multiple values, but the value types must be the same."/>
<meta itemprop="name" content="05. enum edition">
<meta itemprop="description" content="This time, I will explain the enum value of LuneScript. enum   LuneScript enums allow you to name and manage sets of values.  The types of values that can be handled as enums are as follows.    int    real    str    The range of an enum can be defined from multiple values, but the value types must be the same.">

<meta itemprop="wordCount" content="1056">



<meta itemprop="keywords" content="" /></head>
<body><div class="container"><header>
<h1>tech</h1>


[<a href="https://ifritjp.github.io/documents/en/">English</a>]

[<a href="https://ifritjp.github.io/documents/">Japanese</a>]

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/documents/">Home</a></li>
<li><a href="https://ifritjp.github.io/blog2/public/">blog</a></li>
<li><a href="https://ifritjp.github.io/LuneScript-webFront/contents/">LuneScript on Web</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>05. enum edition</h1>

<p>
This time, I will explain the enum value of LuneScript.
</p>
<h2 id="headline-1">
enum
</h2>
<p>
LuneScript enums allow you to name and manage sets of values.
</p>
<p>
The types of values that can be handled as enums are as follows.
</p>
<ul>
<li>
<p>
int
</p>
</li>
<li>
<p>
real
</p>
</li>
<li>
<p>
str  
</p>
</li>
</ul>
<p>
The range of an enum can be defined from multiple values, but the value types must be the same.
</p>
<p>
That is, an enum with an int value cannot define a real or str value.
</p>
<h3 id="headline-2">
Definition method
</h3>
<p>
The enum is defined as follows:
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0,
  val1,
  val2,
}
print( TestEnum.val0, TestEnum.val1, TestEnum.val2 );  // 0, 1, 2</code></pre>
</div>
<p>
In this example, we define val0, val1, val2, which are 0, 1, 2, respectively.
</p>
<p>
If you want to specify a value for an enum, define it as follows:
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0 = 10,
  val1,
  val2 = 20,
}
print( TestEnum.val0, TestEnum.val1, TestEnum.val2 ); // 10, 11, 20</code></pre>
</div>
<p>
If you omit the enum value, assign the value as follows:
</p>
<ul>
<li>
<p>
Assign the value obtained by adding 1 to the previous enum value.
</p>
</li>
<li>
<p>
The first enum value is 0
</p>
</li>
</ul>
<p>
When assigning a character string to the enum value, the value cannot be omitted.
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0 = &#34;abc&#34;,
  val1 = &#34;def&#34;,
  val2 = &#34;ghi&#34;,
}
print( TestEnum.val0, TestEnum.val1, TestEnum.val2 ); // abc def ghi</code></pre>
</div>
<p>
An expression can be specified for the value to be set in the enum value. However, this expression should only use immediate values.
</p>
<p>
For example, in the following cases
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: error
fn func(): int {
  return 100;
}
enum TestEnum {
  val0,
  val1 = val0 + 10,  // 10
  val2 = func(),     // error
}</code></pre>
</div>
<p>
<code>val = val0 + 10</code> can be specified because it uses an immediate value, but <code>val2 = func()</code> is not an immediate value, so an error will occur.
</p>
<h3 id="headline-3">
how to use
</h3>
<p>
The defined enum can be used as a type as follows:
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0,
  val1,
  val2,
}
fn func( val:TestEnum ): int {
   return val + 100;
}
print( func( TestEnum.val1 ) ); // 101</code></pre>
</div>
<p>
Where the argument val of <code class="verbatim">func()</code> is of type TestEnum. This allows the <code class="verbatim">func()</code> argument val to be a range-limited int rather than just an int.
</p>
<p>
If you specify an enum value, it will be <code>enum type symbol.enum value symbol</code>, such as <code>TestEnum.val</code>.
</p>
<h3 id="headline-4">
Omitted
</h3>
<p>
Basically, to specify an enum value, use <code>enum type symbol.enum value symbol</code>, but if you know that the type to which you want to assign is an enum type, you can omit <code>enum type symbol</code>.
</p>
<p>
For example, in the following case, we know that the argument of <code class="verbatim">func()</code> is of type TestEnum, so we can specify it as .val1 instead of TestEnum.val1.
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0,
  val1,
  val2,
}
fn func( val:TestEnum ): int {
   return val + 100;
}
print( func( .val1 ) ); // 101</code></pre>
</div>
<p>
If you omit the enum type defined in the external module, you need to import the external module.
</p>
<p>
I will explain about import at a later date.
</p>
<h3 id="headline-5">
Enum value conversion
</h3>
<p>
The enum value can be used as a defined value as well as as an enum value.
</p>
<p>
You can see this by looking at val + 100 in the example above, where val is the enum value defined in TestEnum, which can be either 0, 1, or 2. (In the above example, val1 is passed, so it becomes 1). So <code>val + 100</code> is 1 + 100, resulting in 101.
</p>
<p>
On the other hand, look at the following example.
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: error
enum TestEnum {
  val0,
  val1,
  val2,
}
fn func( val:TestEnum ): int {
   return val + 100;
}
let val = 1;
func( val ); // error</code></pre>
</div>
<p>
<code>func( val )</code> in this example will result in an error.
</p>
<p>
In this case, val is 1 and val1 is 1 in TestEnum, but an error occurs because the type of val is int and the type is different from TestEnum.
</p>
<p>
To convert a value of type assigned to an enum value to the corresponding enum value, use the <code class="verbatim">_from()</code> function as follows:
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0,
  val1,
  val2,
}
fn func( val:TestEnum ): int {
   return val + 100;
}
let val = 1;
func( unwrap TestEnum._from( val ) );</code></pre>
</div>
<p>
Here <code>func( unwrap TestEnum._from( val ) )</code> gets the enum value TestEnum.val1 of TestEnum corresponding to val by <code class="verbatim">TestEnum._from()</code> and passes it to <code class="verbatim">func()</code>.
</p>
<p>
I&#39;ll talk about unwrap later.
</p>
<h3 id="headline-6">
enum value name
</h3>
<p>
The enum value assigns a value to the symbol.
</p>
<p>
The enum value can get this symbol name dynamically by $ _txt.
</p>
<p>
For example, TestEnum.val1 is output in the following cases.
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0,
  val1,
  val2,
}
fn func( val:TestEnum ) {
   print( val.$_txt ); 
}
func( .val1 ); // TestEnum.val1</code></pre>
</div>
<p>
$ _txt gets the symbol name of the enum value.
</p>
<p>
We&#39;ll talk about $ later, but it&#39;s syntactic sugar for function calls.
</p>
<h4 id="headline-7">
Note on $ _txt
</h4>
<p>
There are the following caveats to $ _txt:
</p>
<p>
<strong>&#34;If there are multiple enum values with the same value, it is undefined which enum value symbol name $ _txt returns.&#34;</strong>
</p>
<p>
For example, in the following cases, it is undefined whether = print () = prints TestEnum.val1 or TestEnum.val2.
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0,
  val1 = 10,
  val2 = 10,
}
fn func( val:TestEnum ) {
   print( val.$_txt ); 
}
func( .val1 ); // TestEnum.???</code></pre>
</div>
<p>
<strong>Also, the string format obtained by $ _txt may change in the future. Do not write code that switches processing depending on the result of _txt.</strong>
</p>
<h3 id="headline-8">
List of all enum values
</h3>
<p>
You can get a list of all enums defined by enums with $ _allList.
</p>
<p>
For example, in the following code
</p>
<div class="src src-lns">
<pre><code class="language-lns" data-lang="lns">// @lnsFront: ok
enum TestEnum {
  val0,
  val1,
  val2,
}
foreach val in TestEnum.$_allList {
   print( val.$_txt );
}</code></pre>
</div>
<p>
Outputs the following:
</p>
<div class="src src-txt">
<div class="highlight"><pre class="chroma"><code class="language-txt" data-lang="txt">TestEnum.val0
TestEnum.val1
TestEnum.val2</code></pre></div>
</div>
<h2 id="headline-9">
Algebraic data type
</h2>
<p>
For enum types, you can group one type of int, real, or str to limit the range, but you cannot group multiple types. Algebraic data types are a more general version of enum types, and all types can be grouped, not just int, real, and str.
</p>
<p>
Details are explained in the next article.
</p>
<p>
<a href="../match">../match</a>
</p>
<h2 id="headline-10">
summary
</h2>
<p>
By using enums, you can easily define the range and provide an exciting way to handle enums easily.
</p>
<p>
Next time, I&#39;ll talk about variables.
</p>
<div class="edit-meta">

<br></div><nav class="pagination"><a class="nav nav-prev-2" href="https://ifritjp.github.io/documents/en/lunescript/set/" title="04.2. Set"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - 04.2. Set</a>
<a class="nav nav-next-2" href="https://ifritjp.github.io/documents/en/lunescript/match/" title="06. match edition">Next - 06. match edition <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<nav class="slide-menu">
<ul>
<li class=""><a href="https://ifritjp.github.io/documents">Home</a></li>

<li class="parent has-sub-menu"><a href="https://ifritjp.github.io/documents/en/lunescript/">Making Lua easier with the transcompiler LuneScript !!<span class="mark opened">-</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/tutorial2.setup/"></a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/tutorial3.hello/">02. Hello world</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/crosscompile/">03. Cross-compiling between Lua versions</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/value/">04. Value</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/set/">04.2. Set</a></li>
<li class="active"><a href="https://ifritjp.github.io/documents/en/lunescript/enum/">05. enum edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/match/">06. match edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/variable/">07. Variables</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/branch/">08. General branch syntax</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/loop/">09. Repeated syntax</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/func/">10. Functions</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/multipleretval/">10.2. Multi-valued return value</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/defaultarg/">10.3. Omission of arguments</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/arg/">10.4. Variadic argument, return value</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/closure/">10.5. Closure</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/nilable/">11. nilable edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/class1/">12. Class Basics</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/class2accessor/">13. accessor edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classinherit/">14. Class inheritance</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classadvertise/">15. Class advertise</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classoverride/">16. Class override</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/interface/">17. Interface</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classmapping/">18. mapping</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/generics/">19. generics edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/nilcond/">20. nil conditional operator edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/import/">21. import / provide</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/require/">22. require / module edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/glue/">22.1. Semi-automatic generation of glue code</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lua/">22.2. Cooperation with Lua</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/make/">23. Build</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/macro/">24. Macro edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/cast/">25. Cast edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/subfile/">26. subfile edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lazyloading/">27. Delayed loading</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/shebang_main/">28. shebang and command line arguments</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/dir/">29. Recommended directory structure for projects that use LuneScript</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go/">@ .1 Transcompile to Go language</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lua_runtime/">@ .1.3 Lua runtime when transcompiled to Go</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/async/">@ .2 Safe asynchronous processing</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/async_old/">@ .2.1 Asynchronous processing O (past information)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go_package/">@ 1.2 Package when transcompiling to Go language</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/luago/">@ 3. Collaboration with Lua</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/completion/">A. Let&#39;s have more fun in an exciting development environment</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/onweb/">A. LuneScript running on a web browser</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lnstags/">A. Tag jump by lnstags (source code tag system)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/recommend/">A. Transcompiler development recommendations</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/reason/">A. Why Lua&#39;s transcompiler LuneScript was developed</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/box/">Box edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go_study/">Transcompile to Z. Go language (under consideration)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/test/">X. Importance of self-hosting and test design in quality control of language development</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
