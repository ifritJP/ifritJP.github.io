<!DOCTYPE html>
<html lang="ja-jp">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>04. Value - tech</title>
<meta name="generator" content="Hugo 0.100.1" />
<link href="https://ifritjp.github.io/documentsindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://ifritjp.github.io/documents/en/lunescript/value/">
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/custom.css">
<script src="https://ifritjp.github.io/documents/js/bundle.js"></script>
<script src="https://ifritjp.github.io/documents/js/lnsSrcRun.js"></script>
<script src="https://ifritjp.github.io/documents/js/highlight_lns.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/highlight_lns.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script><style>
:root {}
</style>
<meta property="og:title" content="04. Value" />
<meta property="og:description" content="This time, I will explain the values that can be handled by LuneScript. Value type The correspondence table between the value types that can be handled by LuneScript and the Lua values after transcompiler is shown. LuneScript Lua go Use How to define in LuneScript nil, null nil nil nil nil int Numerical value LnsInt integer 0 1 2 3 ?A 0x10 -100 real Numerical value LnsReal Real number 0.0" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ifritjp.github.io/documents/en/lunescript/value/" /><meta property="article:section" content="LuneScript" />

<meta property="og:site_name" content="tech" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="04. Value"/>
<meta name="twitter:description" content="This time, I will explain the values that can be handled by LuneScript. Value type The correspondence table between the value types that can be handled by LuneScript and the Lua values after transcompiler is shown. LuneScript Lua go Use How to define in LuneScript nil, null nil nil nil nil int Numerical value LnsInt integer 0 1 2 3 ?A 0x10 -100 real Numerical value LnsReal Real number 0.0"/>
<meta itemprop="name" content="04. Value">
<meta itemprop="description" content="This time, I will explain the values that can be handled by LuneScript. Value type The correspondence table between the value types that can be handled by LuneScript and the Lua values after transcompiler is shown. LuneScript Lua go Use How to define in LuneScript nil, null nil nil nil nil int Numerical value LnsInt integer 0 1 2 3 ?A 0x10 -100 real Numerical value LnsReal Real number 0.0">

<meta itemprop="wordCount" content="2184">
<meta itemprop="keywords" content="" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4708B8S6ES"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4708B8S6ES');
</script>
</head>
<body><div class="container"><header>
<h1>tech</h1>


[<a href="https://ifritjp.github.io/documents/en/">English</a>]

[<a href="https://ifritjp.github.io/documents/">Japanese</a>]

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/documents/">Home</a></li>
<li><a href="https://ifritjp.github.io/blog2/public/">blog</a></li>
<li><a href="https://ifritjp.github.io/LuneScript-webFront/contents/">LuneScript on Web</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>04. Value</h1>

<p>
This time, I will explain the values that can be handled by LuneScript.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Value type
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
The correspondence table between the value types that can be handled by LuneScript and the Lua values after transcompiler is shown.</p>
<table>
<thead>
<tr>
<th>LuneScript</th>
<th>Lua</th>
<th>go</th>
<th>Use</th>
<th>How to define in LuneScript</th>
<th class="align-right"></th>
</tr>
</thead>
<tbody>
<tr>
<td>nil, null</td>
<td>nil</td>
<td>nil</td>
<td>nil</td>
<td>nil</td>
<td class="align-right"></td>
</tr>
<tr>
<td>int</td>
<td>Numerical value</td>
<td>LnsInt</td>
<td>integer</td>
<td>0 1 2 3 ?A 0x10 -100</td>
<td class="align-right"></td>
</tr>
<tr>
<td>real</td>
<td>Numerical value</td>
<td>LnsReal</td>
<td>Real number</td>
<td>0.0 1.0 0.001</td>
<td class="align-right"></td>
</tr>
<tr>
<td>str</td>
<td>String</td>
<td>string</td>
<td>String, binary data</td>
<td>&#34;abc&#34; &#39;def&#39;  ```hij```</td>
<td class="align-right"></td>
</tr>
<tr>
<td>bool</td>
<td>Boolean value</td>
<td>bool</td>
<td>Boolean value</td>
<td>true false</td>
<td class="align-right"></td>
</tr>
<tr>
<td>List</td>
<td>table</td>
<td>LnsList</td>
<td>list</td>
<td>[1, 2, 3 ]</td>
<td class="align-right"></td>
</tr>
<tr>
<td><del>Array</del></td>
<td><del>table</del></td>
<td><del>Array (fixed length)</del></td>
<td><del>[@ 1, 2, 3 ]</del></td>
<td></td>
<td class="align-right"></td>
</tr>
<tr>
<td>Map</td>
<td>table</td>
<td>LnsMap</td>
<td>map</td>
<td>{ &#34;A&#34;:1, &#34;BC&#34;: 100 }</td>
<td class="align-right"></td>
</tr>
<tr>
<td>Set</td>
<td>table</td>
<td>LnsSet</td>
<td>set</td>
<td>(@ 1, 2, 3)</td>
<td class="align-right"></td>
</tr>
<tr>
<td>class</td>
<td>table</td>
<td>struct</td>
<td>class</td>
<td>class Test {}</td>
<td class="align-right"></td>
</tr>
<tr>
<td>interface</td>
<td>table</td>
<td>interface</td>
<td>interface</td>
<td>interface Test {}</td>
<td class="align-right"></td>
</tr>
<tr>
<td>fn</td>
<td>function</td>
<td>func</td>
<td>function</td>
<td>fn func() {}</td>
<td class="align-right"></td>
</tr>
<tr>
<td>enum</td>
<td>Numbers, strings</td>
<td>const</td>
<td>enum</td>
<td>enum Test { }</td>
<td class="align-right"></td>
</tr>
<tr>
<td>alge</td>
<td>table</td>
<td>struct</td>
<td>Algebraic data</td>
<td>alge Test { }</td>
<td class="align-right"></td>
</tr>
<tr>
<td>Luaval</td>
<td>Lua value</td>
<td>Lns_luaValue</td>
<td>The value of Lua itself</td>
<td></td>
<td class="align-right"></td>
</tr>
<tr>
<td>stem</td>
<td>value</td>
<td>LnsAny</td>
<td>A type that can hold all values except nil</td>
<td></td>
<td class="align-right"></td>
</tr>
</tbody>
</table>
<p>
<strong>2019/3 Set added. 2020/10 Luaval added</strong></p>
<p>
As mentioned above, LuneScript subdivides Lua values and treats each as a separate type.</p>
<p>
The intent of the subdivision is to improve Lua&#39;s next specification:</p>
<ul>
<li>All Lua numbers are real numbers, and if you are not familiar with them, problems will occur due to the fact that the numbers are real numbers. For example, Lua&#39;s calculation for <code>10/3</code> is 3.3333 instead of 3.</li>
<li>
<p>Lua&#39;s table is divided into a sequence in which all keys are natural numbers and a non-sequence in which keys are not natural numbers.</p>
<ul>
<li>
<p>Due to this difference, the functions for enumerating the data in the table are divided into ipairs and pairs, and it is necessary to use them properly.</p>
<ul>
<li>It can be said that there is no problem if only pairs are used. .. ..</li>
</ul>
</li>
<li>The <code>#</code> operator, which gets the size of a table, is confusing because it returns the size of the sequence, not the size of the non-sequence.</li>
</ul>
</li>
</ul>
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
nil
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>
nil is the same as Lua&#39;s nil.</p>
<p>
Null is also available in LuneScript.</p>
<p>
null is an alias for nil.</p>
<p>
Null support allows LuneScript to handle JSON out of the box.</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Integer, real number
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>
LuneScript treats integers and real numbers separately.</p>
<p>
This makes 10/3 3 and 10 / 3.0 3.3333 …</p>
<p>
The model names are as follows.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let val:int = 1;      // 整数 int
let val2:real = 1.5;  // 実数 real</code></pre>
</div>
<div id="outline-container-headline-4" class="outline-4">
<h4 id="headline-4">
Numeric literal
</h4>
<div id="outline-text-headline-4" class="outline-text-4">
<p>
Numeric literals are C89-like.</p>
<ul>
<li>Integers support decimal and hexadecimal representations</li>
<li>Real numbers are exponential notation in decimal and e.</li>
</ul>
</div>
</div>
<div id="outline-container-headline-5" class="outline-4">
<h4 id="headline-5">
letter
</h4>
<div id="outline-text-headline-5" class="outline-text-4">
<p>
LuneScript can use <code>?</code> to treat the code of the character following <code>?</code> as an immediate value of type int.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( ?a ); // 97  (0x61)</code></pre>
</div>
<p>
If you want to get the character code of&#39;or&#39;, you need to escape it with \ like? \&#39;.</p>
<p>
Only 1 byte of code can be retrieved this way. For example, if the character following? Is a multibyte code such as UTF-8, the first byte is fetched, the second and subsequent bytes are parsed as LuneScript code, and a parse error occurs.</p>
</div>
</div>
<div id="outline-container-headline-6" class="outline-4">
<h4 id="headline-6">
Four arithmetic operations
</h4>
<div id="outline-text-headline-6" class="outline-text-4">
<p>
The four arithmetic operations of numbers are the same as Lua.</p>
<p>
The type of the result of the binary operation changes as follows.</p>
<ul>
<li>The result of the operation of int and int is int.</li>
<li>The result of the operation of real and real is real.</li>
<li>The result of the operation of int and real is real.</li>
</ul>
<p>However, if the result of the operation of int and int is out of the range of int, the internal value at runtime will be real, but the type on LuneScript will remain int. To round the result to an int, it must be cast with <code>@@int</code>.</p>
<p>
When transcompiled to go, it remains int internally.</p>
</div>
</div>
<div id="outline-container-headline-7" class="outline-4">
<h4 id="headline-7">
Bit operation
</h4>
<div id="outline-text-headline-7" class="outline-text-4">
<p>
Supports bit operations. Not available in Lua 5.1.</p>
<p>
The bit length is 32 bits for Lua5.2. The bit length of Lua5.3 depends on the environment.</p>
<ul>
<li>Logical AND (&amp;)</li>
</ul>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( 1 &amp; 3 == 1 );</code></pre>
</div>
<ul>
<li>OR (|)</li>
</ul>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( 1 | 2 == 3 );</code></pre>
</div>
<ul>
<li>Exclusive OR (~)</li>
</ul>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( 1 ~ 3 == 2 );</code></pre>
</div>
<ul>
<li>Logical shift (left) (| &lt;&lt;)</li>
</ul>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( 1 |&lt;&lt; 2 == 4 );</code></pre>
</div>
<ul>
<li>Logical shift (right) (| &gt;&gt;)</li>
</ul>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( 0x10 |&gt;&gt; 2 == 4 );</code></pre>
</div>
<ul>
<li>Bit inversion (~)</li>
</ul>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( ~2 == 0xfffffffd );</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
String
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p>
Enclose it in &#34;or&#34; to make a string. You can use&#39;in &#34;&#34; and &#34;in&#34;.</p>
<p>
Note that &#34;&#34;,&#39;&#39; cannot include line breaks. Use &#34;&#34; to include line breaks.</p>
<p>
  Use `` `to define a multi-line string without using. Inside `` `` `` is a string as it is, not a line break.</p>
<p>
Use [N] to get the character at a specific position in the string. The N specified here indicates that the string starts with 1.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let txt = &#34;abc&#34;;
print( txt[ 2 ] );  // 98</code></pre>
</div>
<p>
<strong>The behavior when N exceeds the string length is undefined.</strong></p>
<p>
Get the string length with #.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
print( #&#34;abc&#34; ); // 3</code></pre>
</div>
<p>
The type name is str as follows.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let val:str = &#34;abc&#34;; // 文字列 str</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-9" class="outline-3">
<h3 id="headline-9">
False value (bool)
</h3>
<div id="outline-text-headline-9" class="outline-text-3">
<p>
It has true and false.</p>
<p>
The model name is bool as follows.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let val:bool = true; // bool</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-10" class="outline-3">
<h3 id="headline-10">
list
</h3>
<div id="outline-text-headline-10" class="outline-text-3">
<p>
Lists are types to which you can add or remove values.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let mut list:List&lt;int&gt; = [];
list.insert( 1 ); // [ 1 ]
list.insert( 2 ); // [ 1, 2 ]
list.insert( 3 ); // [ 1, 2, 3 ]
list.remove(); // [ 1, 2 ]
print( list[1] ); // 1</code></pre>
</div>
<p>
<strong>Access the elements of the list with [index]. The index at the top of the list is 1. The behavior when accessing outside the range of the list is undefined.</strong></p>
<p>
<em><em>The original LuneScript was developed as a lua transcompiler, so//I set the index from 1 to emphasize compatibility with lua,//I think this was a failure now. ..</em></em></p>
<p>
It is <code>#</code> that gets the length of the list. For example, <code>#list</code> gets the length of the list type variable list.</p>
<p>
The addition of the value is the same as Lua, <code class="verbatim">insert()</code>, and the deletion is <code class="verbatim">remove()</code>.</p>
<p>
The type name is List &lt;T&gt; as follows. Where T indicates the type of element that the list holds.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let val:List&lt;int&gt; = [1,2];</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-11" class="outline-3">
<h3 id="headline-11">
Map   
</h3>
<div id="outline-text-headline-11" class="outline-text-3">
<p>
Map literals are an extension of the JSON format.</p>
<p>
You can work with the JSON format as follows:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let map = {
   &#34;val1&#34;: 1,
   &#34;val2&#34;: 2,
   &#34;val3&#34;: 3
};
print( map.val1, map.val2, map.val3 ); // 1 2 3</code></pre>
</div>
<p>
It differs from JSON in the following ways:</p>
<ul>
<li>All values except nil can be used for keys and values</li>
</ul>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let mut test:Map&lt;int,int&gt; = {};
let map = {
   1: &#34;val1&#34;,
   2.0: &#34;val2&#34;,
   test: &#34;val3&#34;
};
print( map[ 1 ], map[ 2.0 ], map[ test ] ); // val1 val2 val3</code></pre>
</div>
<p>
Also, since null is an alias of nil, JSON itself can be handled.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let mut map:Map&lt;str,int&gt; = {};
map[ &#34;abc&#34; ] = 1;
map.xyz = 10;</code></pre>
</div>
<p>
Access the Map elements with [key]. If the key type is str, you can also access it as .key.</p>
<p>
For example, the following [&#34;abc&#34;] and .abc access the same element, so print in the following example prints true.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: skip
print( map[ &#34;abc&#34; ] == map.abc ); // true</code></pre>
</div>
<p>
Note that you cannot use the <code>#</code> operator on maps.</p>
<p>
The model name of Map is Map &lt;K, V&gt; as follows. Where K is the key type and V is the value type associated with the key.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let val:Map&lt;str,int&gt; = { &#34;abc&#34;:123 };</code></pre>
</div>
<div id="outline-container-headline-12" class="outline-4">
<h4 id="headline-12">
Map notes
</h4>
<div id="outline-text-headline-12" class="outline-text-4">
<p>
Keep the following in mind when working with Maps:</p>
<ul>
<li>Map keys cannot distinguish between int and real.</li>
</ul>
<p><strong>Specifically, it is undefined what <code>map[1]</code> and <code>map[1.0]</code> return in the example below.</strong></p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let map = {
   1: &#34;val1&#34;,
   1.0: &#34;val2&#34;,
};
print( map[ 1 ], map[ 1.0 ] );</code></pre>
</div>
<p>
This is a limitation derived from the Lua specification.</p>
<p>
Note that when transcompiled to go, int and real are distinguished.</p>
<ul>
<li>Key equivalent judgment when a key other than int, real, str is used</li>
</ul>
<p>In the following example, list1 and list2 are both lists with an int 1 as an element. Using this list1 as a key, register &#34;aaa&#34; in the map.</p>
<p>
And if you get the values from map with list1 and list2 as keys, the result will be aaa and nil.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let mut map:Map&lt;&amp;List&lt;int&gt;,str&gt; = {};
let list1 = [ 1 ];
let list2 = [ 1 ];
map[ list1 ] = &#34;aaa&#34;;
print( map[ list1 ], map[ list2 ] );  // aaa nil</code></pre>
</div>
<p>
This is because list1 and list2 are determined as different keys.</p>
<p>
If you use anything other than int, real, or str for a map key, the keys must be equal or not for the same object.</p>
<ul>
<li>nilable</li>
</ul>
<p>As mentioned above, access to Map elements is as follows.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let map = {
   &#34;val1&#34;: 1,
   &#34;val2&#34;: 2,
   &#34;val3&#34;: 3
};
print( map.val1, map.val2, map.val3 ); // 1 2 3</code></pre>
</div>
<p>
Here, map.val1 becomes nilable and cannot be treated as 1 of the original data int as it is.</p>
<p>
That is, you cannot run <code class="verbatim">map.val1 + 1</code> as follows:</p>
<pre class="example">
print( map.val1 +1 )
</pre>
<p>
This is because when you access an element of the map, the result is nilable.</p>
<p>
See below for nilable.</p>
<p>
<a href="../nilable">../nilable</a></p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-13" class="outline-3">
<h3 id="headline-13">
Set
</h3>
<div id="outline-text-headline-13" class="outline-text-3">
<p>
Handles a set of values.</p>
<p>
See the following article for more information.</p>
<p>
<a href="../set/">../set/</a></p>
</div>
</div>
<div id="outline-container-headline-14" class="outline-3">
<h3 id="headline-14">
generics
</h3>
<div id="outline-text-headline-14" class="outline-text-3">
<p>
List, Array and Map support generics.</p>
<p>
For example, declare as follows.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let list:List&lt;int&gt; = [];  // int を要素に持つリスト
let array:Array&lt;real&gt; = [@];  // real を要素に持つ配列
let map:Map&lt;str,int&gt; = {}; // str をキー、int を値に持つマップ</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-15" class="outline-3">
<h3 id="headline-15">
Collection type
</h3>
<div id="outline-text-headline-15" class="outline-text-3">
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let list = [ 1, 2, 3 ];
let map = { &#34;A&#34;: 10, &#34;B&#34;: 11, &#34;C&#34;: 12 };</code></pre>
</div>
<p>
Collection such as lists and maps can declare literals as above. The types of lists and maps generated at this time are determined by the constituent values.</p>
<p>
If all the values used in the constructor of a collection are of the same type, the type of the collection will be the type of that value.</p>
<p>
For example, <code>[ 1, 2, 3 ]</code> in the above sample is List &lt;int&gt;.</p>
<p>
If the values used in the collection&#39;s constructor are different, the collection&#39;s type will be stem.</p>
<p>
Specifically, it looks like this:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
let list1 = [ 1, 2, 3 ];			// List&lt;int&gt;
let list2 = [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39; ];			// List&lt;str&gt;
let list3 = [ &#39;a&#39;, 1, &#39;c&#39; ];			// List&lt;stem&gt;
let map1 = { &#34;A&#34;: 10, &#34;B&#34;: 11, &#34;C&#34;: 12 };	// Map&lt;str,int&gt;
let map2 = { &#34;A&#34;: 10, &#34;B&#34;: 11, &#34;C&#34;: 12 };	// Map&lt;str,int&gt;
let map3 = { &#34;a&#34;: &#39;z&#39;, &#34;b&#34;: &#39;y&#39;, &#34;c&#34;: &#39;x&#39; };	// Map&lt;str,str&gt;
let map4 = { &#34;a&#34;: 1, &#34;b&#34;: &#39;Z&#39; };		// Map&lt;str,stem&gt;</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-16" class="outline-3">
<h3 id="headline-16">
Constructor for a collection with a mixture of inherited classes
</h3>
<div id="outline-text-headline-16" class="outline-text-3">
<p>
Constructors for collections with a mixture of inherited classes can fail because type inference cannot be resolved.</p>
<p>
In that case, specify the type.</p>
<p>
The following sample is shown.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: error
class Test {
}
class Sub extend Test {
}
{
   let mut val1 = [ [ new Test() ], [ new Sub() ] ]; // error
   let mut val2:List&lt;List&lt;Test&gt;&gt; = [ [ new Test() ], [ new Sub() ] ]; // ok
   let mut val3 = [ [ new Test() ], [ new Test() ] ]; // ok
   let mut val4 = [ [ new Sub() ], [ new Sub() ] ]; // ok
}</code></pre>
</div>
<p>
Here, val1 using type inference will result in an error. On the other hand, val2, which specifies the type, is OK. Since val3 and val4 do not have a mixture of classes, type inference is possible.</p>
</div>
</div>
<div id="outline-container-headline-17" class="outline-3">
<h3 id="headline-17">
enum
</h3>
<div id="outline-text-headline-17" class="outline-text-3">
<p>
LuneScript supports enums.</p>
<p>
See tomorrow&#39;s article for more details.</p>
<p>
<a href="../enum/">../enum/</a></p>
</div>
</div>
<div id="outline-container-headline-18" class="outline-3">
<h3 id="headline-18">
Luaval
</h3>
<div id="outline-text-headline-18" class="outline-text-3">
<p>
LuneScript can execute Lua code. The execution result of Lua code is converted internally for int, real, bool, str, but other values are processed as Lua values without conversion.</p>
<p>
Luaval holds the value of that Lua.</p>
<p>
See below for details.</p>
<p>
<a href="../lua/">../lua/</a></p>
</div>
</div>
<div id="outline-container-headline-19" class="outline-3">
<h3 id="headline-19">
stem
</h3>
<div id="outline-text-headline-19" class="outline-text-3">
<p>
stem is a type that can hold all values except nil.</p>
<p>
LuneScript is a statically typed language, and if you give it a value different from the expected type, a compilation error will occur.</p>
<p>
On the other hand, the stem type is a type that can handle all types other than nil, so no compile error will occur even if any value other than nil is given.</p>
<p>
stem! is a type that can handle all values including nil. You can think of it as a Lua variable itself.</p>
</div>
</div>
<div id="outline-container-headline-20" class="outline-3">
<h3 id="headline-20">
form
</h3>
<div id="outline-text-headline-20" class="outline-text-3">
<p>
form is a type that handles function objects.</p>
<p>
The function will be described later.</p>
</div>
</div>
</div>
</div>
<div class="edit-meta">

<br></div><nav class="pagination"><a class="nav nav-prev-2" href="https://ifritjp.github.io/documents/en/lunescript/crosscompile/" title="03. Cross-compiling between Lua versions"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - 03. Cross-compiling between Lua versions</a>
<a class="nav nav-next-2" href="https://ifritjp.github.io/documents/en/lunescript/set/" title="04.2. Set">Next - 04.2. Set <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<nav class="slide-menu">
<ul>
<li class=""><a href="https://ifritjp.github.io/documents">Home</a></li>

<li class="parent has-sub-menu"><a href="https://ifritjp.github.io/documents/en/lunescript/">Making Lua easier with the transcompiler LuneScript !!<span class="mark opened">-</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/tutorial2.setup/">01. Introduction</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/tutorial3.hello/">02. Hello world</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/crosscompile/">03. Cross-compiling between Lua versions</a></li>
<li class="active"><a href="https://ifritjp.github.io/documents/en/lunescript/value/">04. Value</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/set/">04.2. Set</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/enum/">05. enum edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/match/">06. match edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/variable/">07. Variables</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/branch/">08. General branch syntax</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/loop/">09. Repeated syntax</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/func/">10. Functions</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/multipleretval/">10.2. Multi-valued return value</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/defaultarg/">10.3. Omission of arguments</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/arg/">10.4. Variadic argument, return value</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/closure/">10.5. Closure</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/nilable/">11. nilable edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/class1/">12. Class Basics</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/class2accessor/">13. accessor edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classinherit/">14. Class inheritance</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classadvertise/">15. Class advertise</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classoverride/">16. Class override</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/interface/">17. Interface</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classmapping/">18. mapping</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/generics/">19. generics edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/nilcond/">20. nil conditional operator edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/import/">21. import / provide</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/require/">22. require / module edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/glue/">22.1. Semi-automatic generation of glue code</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lua/">22.2. Cooperation with Lua</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/make/">23. Build</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/macro/">24. Macro edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/cast/">25. Cast edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/subfile/">26. subfile edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lazyloading/">27. Delayed loading</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/shebang_main/">28. shebang and command line arguments</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/dir/">29. Recommended directory structure for projects that use LuneScript</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go/">80. Transcompile to Go language</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go_package/">80.2 Package when transcompiling to Go language</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lua_runtime/">80.3 Lua runtime when transcompiled to Go</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/async/">81. Safe asynchronous processing</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/async_old/">81.1 Asynchronous processing O (past information)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/luago/">82. Collaboration with Lua</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/completion/">A. Let&#39;s have more fun in an exciting development environment</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/onweb/">A. LuneScript running on a web browser</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lnstags/">A. Tag jump by lnstags (source code tag system)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/recommend/">A. Transcompiler development recommendations</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/reason/">A. Why Lua&#39;s transcompiler LuneScript was developed</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/box/">Box edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go_study/">Transcompile to Z. Go language (under consideration)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/test/">X. Importance of self-hosting and test design in quality control of language development</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
