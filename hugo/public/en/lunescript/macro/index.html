<!DOCTYPE html>
<html lang="ja-jp">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>24. Macro - tech</title>
<meta name="generator" content="Hugo 0.111.3">
<link href="https://ifritjp.github.io/documentsindex.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://ifritjp.github.io/documents/en/lunescript/macro/">
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/theme.min.css">
<script src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/chroma.min.css">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/custom.css">
<script src="https://ifritjp.github.io/documents/js/bundle.js"></script>
<script src="https://ifritjp.github.io/documents/js/lnsSrcRun.js"></script>
<script src="https://ifritjp.github.io/documents/js/highlight_lns.js"></script>
<link rel="stylesheet" href="https://ifritjp.github.io/documents/css/highlight_lns.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script><style>
:root {}
</style>
<meta property="og:title" content="24. Macro" />
<meta property="og:description" content="This time, I will explain about LuneScript macros.
macro LuneScript supports macros.
Maybe it&#39;s easier to say &#34;metaprogramming&#34; than &#34;macro&#34; these days.
To explain &#34;what is a macro&#34;, I think it will be easier to understand if you explain the difference from a function.
A function is a collection of operations. On the other hand, macros can define multiple function definitions themselves collectively. Of course, what can be defined as a macro is not only function definitions, but almost all processes can be defined." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ifritjp.github.io/documents/en/lunescript/macro/" /><meta property="article:section" content="LuneScript" />

<meta property="og:site_name" content="tech" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="24. Macro"/>
<meta name="twitter:description" content="This time, I will explain about LuneScript macros.
macro LuneScript supports macros.
Maybe it&#39;s easier to say &#34;metaprogramming&#34; than &#34;macro&#34; these days.
To explain &#34;what is a macro&#34;, I think it will be easier to understand if you explain the difference from a function.
A function is a collection of operations. On the other hand, macros can define multiple function definitions themselves collectively. Of course, what can be defined as a macro is not only function definitions, but almost all processes can be defined."/>
<meta itemprop="name" content="24. Macro">
<meta itemprop="description" content="This time, I will explain about LuneScript macros.
macro LuneScript supports macros.
Maybe it&#39;s easier to say &#34;metaprogramming&#34; than &#34;macro&#34; these days.
To explain &#34;what is a macro&#34;, I think it will be easier to understand if you explain the difference from a function.
A function is a collection of operations. On the other hand, macros can define multiple function definitions themselves collectively. Of course, what can be defined as a macro is not only function definitions, but almost all processes can be defined.">

<meta itemprop="wordCount" content="2171">
<meta itemprop="keywords" content="" />
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4708B8S6ES"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4708B8S6ES');
</script>
</head>
<body><div class="container"><header>
<h1>tech</h1>


[<a href="https://ifritjp.github.io/documents/en/">English</a>]

[<a href="https://ifritjp.github.io/documents/">Japanese</a>]

</header>
<div class="global-menu">
<nav>
<ul>
<li><a href="/documents/">Home</a></li>
<li><a href="https://ifritjp.github.io/blog2/public/">blog</a></li>
<li><a href="https://ifritjp.github.io/LuneScript-webFront/lnsc_web_frontend/for_wasm/">LuneScript on Web</a></li></ul>
</nav>
</div>
<div class="content-container">
<main><h1>24. Macro</h1>

<p>
This time, I will explain about LuneScript macros.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
macro
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>
LuneScript supports macros.</p>
<p>
<strong>Maybe it&#39;s easier to say &#34;metaprogramming&#34; than &#34;macro&#34; these days.</strong></p>
<p>
To explain &#34;what is a macro&#34;, I think it will be easier to understand if you explain the difference from a function.</p>
<p>
<strong>A function is a collection of operations. On the other hand, macros can define multiple function definitions themselves collectively. Of course, what can be defined as a macro is not only function definitions, but almost all processes can be defined.</strong></p>
<p>
I think Lisp is the most major programming language for macros, but LuneScript macros are not as advanced as Lisp. However, they are not as restrictive as C language macros.</p>
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
Macro basics
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>
<strong>Macros are expanded at compile time, not at run time.</strong></p>
<p>
It&#39;s difficult to write a macro if you don&#39;t keep this in mind, so be sure to keep this in mind when writing a macro.</p>
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Simple macro example
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>
Here&#39;s a simple macro example:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
macro _Hello() {
   print( &#34;hello world&#34; );
}
_Hello(); // hello world</code></pre>
</div>
<p>
This is the macro _Hello that prints hello world.</p>
<p>
Macro definitions use the macro keyword.</p>
<p>
This example is a macro that is no different from using a function definition, so there is no point in defining it as a macro.</p>
<p>
However, it is a good example to convey that &#34;macros can be defined in the same way as function definitions&#34;.</p>
<p>
In programming languages with macros, macro definitions often require special processing unlike general function definitions.</p>
<p>
As a result, the hurdles of the mind rise, saying, &#34;Macro seems to be something difficult.&#34;</p>
<p>
However, in LuneScript, like the hello world sample above, you can define macros in the same way as defining functions in general.</p>
<p>
However, you cannot define a meaningful macro by writing a macro like the example above.</p>
<p>
Below we&#39;ll show you how to define meaningful macros.</p>
</div>
</div>
<div id="outline-container-headline-4" class="outline-3">
<h3 id="headline-4">
macro example
</h3>
<div id="outline-text-headline-4" class="outline-text-3">
<p>
Here&#39;s an example of a slightly more practical macro:</p>
<p>
This macro has the following specifications:</p>
<ul>
<li>A macro _Test that defines a function that returns an int value</li>
<li>The int value returned by the function is given as an argument to the macro</li>
<li>The name of the defined function is determined by the value of int</li>
<li>Specifically, the function name that returns 1 is func1</li>
</ul>
<p>Here is the code for the specific macro:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
macro _Test( val:int ) {
   {
      let name = &#34;func%d&#34;(val);
   }
   fn ,,,name(): int {
      return ,,val;
   }
}

_Test( 1 );
_Test( 10 );

print( func1(), func10() ); // 1  10</code></pre>
</div>
<p>
When expanding a macro, it&#39;s pretty much the same as a function call.</p>
<p>
In this case, _Test( 1 ), _Test( 10 ) are macro expansions. _Test( 1 ), _Test( 10 ) expands to</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
// Test( 1 )
fn func1():int {
   return 1;
}
// Test( 10 )
fn func10():int {
   return 10;
}</code></pre>
</div>
<p>
This defines functions func1() and func10() , so <code>print( func1(), func10() )</code> outputs 1 10 .</p>
<p>
This macro is described below.</p>
</div>
</div>
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
how to write a macro
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>
The macro definition syntax is:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: skip
macro name( arg ) {
   {
      macro-statement
   }
   expand-statement
}</code></pre>
</div>
<p>
It starts with the keyword macro, followed by the macro name name and the arguments arg. Macro name name must start with _. Conversely, non-macro symbol names must not start with _.</p>
<p>
Macro arguments support the following types:</p>
<ul>
<li>int</li>
<li>real</li>
<li>str</li>
<li>bool  </li>
<li>stat</li>
<li>List, Map, Set above</li>
<li>sym</li>
<li>__exp</li>
<li>__block</li>
</ul>
<p>sym, stat, __exp, and __block are described below.</p>
<p>
Next comes the macro-statement block, followed by the expand-statement .</p>
<p>
To understand how to define a macro, it is easier to understand expand-statement first, so expand-statement will be explained before explaining the macro-statement block.</p>
<div id="outline-container-headline-6" class="outline-4">
<h4 id="headline-6">
argument
</h4>
<div id="outline-text-headline-6" class="outline-text-4">
<p>
The following argument types are available for macros only.</p>
<ul>
<li>sym</li>
<li>stat  </li>
<li>__exp</li>
<li>__block</li>
</ul>
<div id="outline-container-headline-7" class="outline-5">
<h5 id="headline-7">
sym
</h5>
<div id="outline-text-headline-7" class="outline-text-5">
<p>
sym is a type that can store symbols.</p>
<p>
Symbols can be used as functions, variables, members, classes, and all symbols.</p>
</div>
</div>
<div id="outline-container-headline-8" class="outline-5">
<h5 id="headline-8">
stat
</h5>
<div id="outline-text-headline-8" class="outline-text-5">
<p>
stat is a type that can store statements.</p>
</div>
</div>
<div id="outline-container-headline-9" class="outline-5">
<h5 id="headline-9">
__exp
</h5>
<div id="outline-text-headline-9" class="outline-text-5">
<p>
__exp is a type that can store all expressions.</p>
<p>
Any expression can be specified, for example <code class="verbatim">1 + 1</code> or <code class="verbatim">func()</code> . However, it must be an expression that can be evaluated without error at the time the macro is called.</p>
</div>
</div>
<div id="outline-container-headline-10" class="outline-5">
<h5 id="headline-10">
__block
</h5>
<div id="outline-text-headline-10" class="outline-text-5">
<p>
__block is a type that can store the block statement <code class="verbatim">{}</code>.</p>
<p>
Like __exp, it must be a block that can be evaluated without error at the time the macro is called.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-11" class="outline-4">
<h4 id="headline-11">
expand-statement
</h4>
<div id="outline-text-headline-11" class="outline-text-4">
<p>
expand-statement writes the code after macro expansion.</p>
<p>
In the _Test macro example, the next part is the expand-statement.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: skip
   fn ,,,name(): int {
      return ,,val;
   }</code></pre>
</div>
<p>
This will expand the function definition.</p>
<p>
Macro-only operators are available in this expand-statement. ,, is that operator.</p>
<p>
Available operators include:</p>
<ul>
<li>,,,,</li>
<li>,,,</li>
<li>,,</li>
</ul>
<p><strong>,,,, is an operator that converts the symbol obtained by evaluating the immediately following variable to a string.</strong></p>
<p>
<strong>,,, is an operator that converts the string obtained by evaluating the immediately following variable into a symbol.</strong></p>
<p>
<strong>,, is an operator that expands the variable that immediately follows it.</strong></p>
<p>
So, in the example above, ,,,name converts the string in the name variable to a symbol, ,,val expands the val variable, and the <code>_Test( 1 )</code> macro expands to:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
fn func1():int {
   return 1;
}</code></pre>
</div>
<p>
Any code can be written in expand-statement as long as it satisfies the following restrictions.</p>
<p>
<strong>expand-statement must be a statement.</strong></p>
<p>
In other words, expand-statement can write any code unless it doesn&#39;t form a statement, such as an expression or part of an incomplete token.</p>
<p>
You can also write multiple statements in expand-statement.</p>
</div>
</div>
<div id="outline-container-headline-12" class="outline-4">
<h4 id="headline-12">
macro-statement
</h4>
<div id="outline-text-headline-12" class="outline-text-4">
<p>
In the macro-statement block, define the variables used by expand-statement. Variables used in expand-statement must be declared in the topmost scope of the macro-statement block.</p>
<p>
In the _Test macro example, the macro-statement is:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: skip
   {
      let name = &#34;func%d&#34;(val);
   }</code></pre>
</div>
<p>
Here we are defining the variable name. Sets &#34;func%d&#34; (val) as the initial value of name.</p>
<p>
Inside the macro-statement, you can use all the features of LuneScript. Specifically, you can also define functions within macro-statement.</p>
<p>
For example, the _Test macro could also be written like this:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
macro _Test( val:int ) {
   {
      fn funcname(): str {
         return &#34;func%d&#34;(val);
      }
      let name = funcname();
   }
   fn ,,,name(): int {
      return ,,val;
   }
}</code></pre>
</div>
<p>
In this example, the macro-statement declares the <code class="verbatim">funcname()</code> function and assigns its result to the name variable.</p>
<p>
The functions that can be used in macro-statement are only LuneScript standard functions. Even if the function is defined in the same source, if the function is defined outside the macro, it cannot be used from the macro-statement.</p>
<p>
A macro-statement can use macro-only operators just like an expand-statement.</p>
<p>
Specifically, the following operators are available:</p>
<ul>
<li>,,,,</li>
<li>,,,</li>
<li>,,</li>
<li><code>`{}</code></li>
<li>~~  </li>
</ul>
<p><strong>``,,,,&#39;&#39; ``,,,&#39;&#39; ``,,&#39;&#39; is almost the same as expand-statement. The difference with expand-statement is that while expand-statement targets the variable that follows it, macro-statement targets the expression that follows it.</strong></p>
<p>
<code>`{}</code> can use the statement written in <code>`{}</code> as it is.</p>
<p>
For example, the _Test macro above can also be written using <code>`{}</code> as:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
macro _Test( val:int ) {
   {
      let defstat = `{
         fn ,,,&#34;func%d&#34;(val)~~():int {
            return ,,val;
         }
      };
   }
   ,,defstat;
}

_Test( 1 );
_Test( 10 );

print( func1(), func10() ); // 1  10</code></pre>
</div>
<p>
Here, <code>`{}</code> is used to store the function definition itself in the variable defstat, and defstat is expanded with expand-statement.</p>
<p>
Extracting the initialization part of this defstat looks like this:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: skip
      let defstat = `{
         fn ,,,&#34;func%d&#34;(val)~~():int {
            return ,,val;
         }
      };</code></pre>
</div>
<p>
<strong>Here you can see the use of ~~ .</strong></p>
<p>
<strong><code>~ is used to delimit operator expressions such as ,,, . The above uses ~</code> after &#34;func%d&#34;(val). This indicates that the expression to which the ,,, operator applies is up to &#34;func%d&#34;(val), after which the () is part of the macro-expanding statement.</strong></p>
<p>
If ~~ is not specified, it means that () is attached to the string generated by &#34;func%d&#34;(val), resulting in a syntax error.</p>
<p>
Here is an example listing for <code>`{}</code>:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
macro _Test( val:int ) {
   {
      let mut statList:List&lt;stat&gt; = [];
      for count = 1, val {
         statList.insert(
            `{          
               fn ,,,&#34;func%d&#34;(count)~~():int {
                  return ,,count;
               }
            } );
      }
   }
   ,,statList;
}

_Test( 5 );

print( func1(), func2(), func3(), func4(), func5() ); // 1 2 3 4 5</code></pre>
</div>
<p>
In this example, multiple function definitions (func1 to func5) are performed by storing multiple function definitions in the list statList of <code>`{}</code> and expanding them.</p>
<p>
Note that the macro-statement block is optional. If you omit the macro-statement block, omit the entire {} as follows.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: skip
macro name( arg ) {
   expand-statement
}</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-13" class="outline-4">
<h4 id="headline-13">
Functions available in macro-statement
</h4>
<div id="outline-text-headline-13" class="outline-text-4">
<p>
The following functions are available in macro-statement.</p>
<ul>
<li>fn _lnsLoad( name:str, code:str ): stem;</li>
</ul>
<p>This function loads the LuneScript code specified by code and returns that module.</p>
</div>
</div>
<div id="outline-container-headline-14" class="outline-4">
<h4 id="headline-14">
macro expansion
</h4>
<div id="outline-text-headline-14" class="outline-text-4">
<p>
The way macros are expanded is the same as for function calls.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-15" class="outline-3">
<h3 id="headline-15">
public macro
</h3>
<div id="outline-text-headline-15" class="outline-text-3">
<p>
Macros can be exposed to external modules.</p>
<p>
By declaring pub as follows, the macro can be used at the import destination.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
pub macro _Hello() {
   print( &#34;hello world&#34; );
}</code></pre>
</div>
</div>
</div>
<div id="outline-container-headline-16" class="outline-3">
<h3 id="headline-16">
A little practical macro example
</h3>
<div id="outline-text-headline-16" class="outline-text-3">
<p>
Here is an example of a slightly more practical macro.</p>
<p>
In order to handle JSON used in parameters and responses of REST API provided by Google etc. with LuneScript, it is convenient to classify each JSON format of REST API. In such a case, manually defining a class that handles various types of JSON format data is inefficient and causes bugs.</p>
<p>
So let&#39;s create a macro that loads the sample JSON format and defines a class that can store that JSON format.</p>
<p>
For this example, load the following JSON file,</p>
<div class="src src-js">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;val1&#34;</span><span class="o">:</span> <span class="s2">&#34;abc&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;val2&#34;</span><span class="o">:</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
</div>
<p>
A macro that defines the following classes for handling the above JSON.</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
class Hoge {
  pri let val1:str {pub};
  pri let val2:int {pub};
}</code></pre>
</div>
<p>
Here is a concrete example of a macro:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: skip
macro _MkClass( name:str, path:str ) {
   {
      let mut memStatList:List&lt;stat&gt; = [];
      if! let mut fileObj = io.open( path ) {
         if! let txt = fileObj.read( &#34;*a&#34; ) {
            let defMap = &#34;pub let val = %s;&#34; (txt);
            let mod = _lnsLoad( &#34;json&#34;, defMap );
            if! let jsonval = mod.val {
               fn getType( val:stem ): str {
                  switch type( val ) {
                     case &#34;number&#34; {
                        return &#34;int&#34;;
                     }
                     case &#34;string&#34; {
                        return &#34;str&#34;;
                     }
                  }
                  return &#34;stem&#34;;
               }
               forsort val, key in jsonval@@Map&lt;str,stem&gt; {
                  memStatList.insert( `{
                     pri let ,,,key : ,,,getType( val )~~ {pub};
                  } );
               }
            }
         }
      }
   }
   class ,,,name {
      ,,memStatList;
   }
}
_MkClass( &#34;Hoge&#34;, &#34;hoge.js&#34; );

let hoge = new Hoge( &#34;ABC&#34;, 100 );
print( hoge.$val1, hoge.$val2 );</code></pre>
</div>
<p>
This macro loads JSON from a file and declares a class to store the JSON structure.</p>
<p>
Specify the class name in the first argument of the macro.</p>
<p>
This macro does the following:</p>
<ul>
<li>Open the specified file and read the JSON string defined in that file.</li>
<li>Generate LuneScript code from JSON string txt with &#34;pub let val = %s;&#34; (txt);</li>
<li>Use <code class="verbatim">_lnsLoad()</code> to load the generated LuneScript code</li>
<li>Extract json val from loaded module and enumerate JSON elements with forsort</li>
<li>Generate <code>`{}</code> declaring a member holding the enumerated elements and add it to memStatList</li>
<li>Declare a class with name and memStatList.</li>
</ul>
<p>In this example, the members are treated as int and str type data for simplicity. It does not support lists etc.</p>
</div>
</div>
<div id="outline-container-headline-17" class="outline-3">
<h3 id="headline-17">
Common map between macros
</h3>
<div id="outline-text-headline-17" class="outline-text-3">
<p>
Macros are actions that are performed at compile time. Also, each macro execution is independent. When executing two macros A and B, it is not possible to change the control of macro B depending on the execution result of macro A.</p>
<p>
However, this can be inconvenient. Therefore, common map between macros is used to share data within macros.</p>
<p>
<strong>*This is an experimental feature.</strong></p>
<p>
From within the macro-statement of the macro, the special variable <code class="verbatim">__var</code> is available.</p>
<p>
The special variable __var has the following restrictions:</p>
<ul>
<li>public macros cannot use __var</li>
<li>Macros that access __var must be used from the same namespace that defines the macro.</li>
<li>If __var is accessed from a different namespace, the contents of that __var are undefined.</li>
</ul>
<p>The type of this variable is:</p>
<pre class="example">
let mut __var:Map&lt;str,stem&gt;
</pre>
<p>
This variable is created at the start of compilation for each module, and all macros access the same variable.</p>
<p>
For example:</p>
<div class="src src-lns">
<pre tabindex="0"><code class="language-lns" data-lang="lns">// @lnsFront: ok
   macro _test0( name:str, val:int ) {
      {
         __var[ name ] = val;
      }
   }
   macro _test1() {
      {
         let val;
         if! let work = __var[ &#34;hoge&#34; ] {
            val = work@@int;
         }
         else {
            val = 10;
         }
      }
      print( &#34;%s&#34; (,,val) );
   }
   _test0( &#34;hogea&#34;, 1 );
   _test1(); // 10
   _test0( &#34;hoge&#34;, 1 );
   _test1(); // 1</code></pre>
</div>
<p>
In this example, the _test0() macro holds the int data in <code class="verbatim">__var[ &#34;hoge&#34; ]</code> and the _test1() macro changes the processing depending on the stored value of <code class="verbatim">__var[ &#34;hoge&#34; ]</code>.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-18" class="outline-2">
<h2 id="headline-18">
summary
</h2>
<div id="outline-text-headline-18" class="outline-text-2">
<p>
LuneScript can define macros in the same way as functions.</p>
<p>
Also, by using macros, you can define various processes.</p>
<p>
Next time, I will explain how to build a project developed using LuneScript.</p>
</div>
</div>
<div class="edit-meta">

<br></div><nav class="pagination"><a class="nav nav-prev-2" href="https://ifritjp.github.io/documents/en/lunescript/make/" title="23. Build"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - 23. Build</a>
<a class="nav nav-next-2" href="https://ifritjp.github.io/documents/en/lunescript/cast/" title="25. Cast">Next - 25. Cast <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main><div class="sidebar">

<nav class="slide-menu">
<ul>
<li class=""><a href="https://ifritjp.github.io/documents">Home</a></li>

<li class="parent has-sub-menu"><a href="https://ifritjp.github.io/documents/en/lunescript/">Easier Lua development with the transcompiler LuneScript!!<span class="mark opened">-</span></a>
  
<ul class="sub-menu">
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/tutorial2.setup/">01. Introduction</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/tutorial3.hello/">02. Hello world</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/crosscompile/">03. Cross-compiling between Lua versions</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/value/">04. Values</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/set/">04.2. Set</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/tuple/">04.3 Tuples</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/enum/">05. enum</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/match/">06. match</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/variable/">07. Variables</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/branch/">08. General branch syntax</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/loop/">09. Repetition Syntax</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/func/">10. Functions</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/multipleretval/">10.2. Multi-value return values</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/defaultarg/">10.3. Omitting Arguments</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/arg/">10.4. Variadic Arguments and Return Values</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/closure/">10.5. Closures</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/error/">10.6. Error handling</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/nilable/">11. nilable</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/class1/">12. Class basics</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/class2accessor/">13. accessor</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classinherit/">14. Class Inheritance</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classadvertise/">15. Class advertise</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classoverride/">16. Class override</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/interface/">17. Interface</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/classmapping/">18. mapping</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/generics/">19. generics</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/generics-go/">19.2. generics (two collection types)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/nilcond/">20. nil conditional operator</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/import/">21. import/provide</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/require/">22. require/module</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/glue/">22.1. Semi-automatic generation of glue code</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lua/">22.2. Linking with Lua</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/make/">23. Build</a></li>
<li class="active"><a href="https://ifritjp.github.io/documents/en/lunescript/macro/">24. Macro</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/cast/">25. Cast</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/subfile/">26. subfile</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lazyloading/">27. Lazy Loading</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/shebang_main/">28. shebang and command line arguments</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/dir/">29. Recommended directory structure for projects using LuneScript</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go/">80. Transcompiling to Go Language</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go_package/">80.2 Packages when transpiling to Go</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go_wasm/">80.4 WebAssembly support for LuneScript</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/async/">81. Safe Asynchronous Processing</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/async_old/">81.1 Asynchronous processing (past information)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/luago/">82. Linking with Lua</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/ebnf/">A. BNF</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/onweb/">A. LuneScript running on a web browser</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/reason/">A. Reason for developing Lua transcompiler LuneScript</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/recommend/">A. Recommendations for transcompiler development</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lnstags/">A. Tag jumping with lnstags (source code tagging system)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/completion/">A.Let&#39;s have more fun in a modern development environment</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/box/">Box edition</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/lua_runtime/">Lua runtime when transpiling to 80.3 Go</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/test/">X. The Importance of Self-Hosting and Test Design in Language Development Quality Control</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/design/">Y.1 How to develop LuneScript</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/design-2/">Y.2 Development of LuneScript (type information management)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/design-3/">Y.3 LuneScript Development (Scopes and Symbols)</a></li>
<li class=""><a href="https://ifritjp.github.io/documents/en/lunescript/go_study/">Z. Transcompile to Go language (exploratory stage)</a></li>
</ul>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>
</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
